# ====================================================================
## objects
# ====================================================================
---
objects:
  - marriage: DAObject
  - marriage.address: ALAddress
  - users: ALPeopleList.using(
      there_are_any=True,
      there_is_another=False,
      target_number=1,
      )
  - other_parties: ALPeopleList.using(
      there_are_any=True,
      there_is_another=False,
      target_number=1,
      )
  - other_parties[0].attorney: ALIndividual
# EKM: commenting out since I currently have this in the children yml, and it's not used here.
#  - children: ALPeopleList.using(
#      ask_number=True,
#      complete_attribute="complete",
#      )
  - judges: ALPeopleList.using(
      there_are_any=True,
      there_is_another=False,
      target_number=1,
      complete_attribute="complete",
      )
  - joint: Thing
  - sell_and_share: Thing
---
code: |
  joint.name.text = "Joint (50/50)"
---
code: |
  sell_and_share.real_property_question_label = "The property should be sold, and we should share equally in the profit or loss from the sale."
  users[0].real_property_question_label = "It should be awarded to me."
  other_parties[0].real_property_question_label = f"It should be awarded to {other_parties[0]}."
---
# ====================================================================
## generics
# ====================================================================
---
generic object: DAList
code: |
  x.reset_gathered()
  x.gathered_reset = True
---
generic object: ALAssetList
id: x.revisit
if: (x.instanceName in ("marriage.accounts", "marriage.other_pp", "marriage.mobile_home") and marriage.personal_property_need_items) or (x.instanceName == "marriage.debts" and marriage.debts.need_items) or (x.instanceName == "marriage.vehicles" and marriage.vehicles.need_items) or x.instanceName == "marriage.real_property"
question: |
  ${x.question_text}
subquestion: |
  ${x.there_is_another_template}

  % if x:
  So far, you have listed&colon;

  ${x.table}
  % endif

  ${x.add_action(color="success", size="md")}
continue button field: x.revisit
validation code: |
  if x.instanceName == "marriage.debts":
    if x.number_gathered() == 0:
      validation_error("You must add at least one debt based on your previous answers.")
  if x.instanceName == "marriage.vehicles":
    if x.number_gathered() > 12:
      validation_error("This tool can only create forms for up to 12 vehicles.")
  if x.instanceName == "marriage.real_property":
    if x.number_gathered() > 10:
      validation_error("This tool can only create forms for up to 10 properties.")  
---
generic object: DAList
id: x.there_are_any
question: |
  ${x.question_text}
fields:
  - label: Do you have any ${x.noun_pl} that have **not** already been {divided}?
    field: x.there_are_any
    datatype: yesnoradio
---
generic object: DAList
id: x.there_is_another
question: |
  ${x.question_text}
subquestion: |
  ${x.there_is_another_template}

  So far, you have listed&colon;

  ${x.table}
fields:
  - label: Do you have another ${x.noun_sl} to add?
    field: x.there_is_another
    datatype: yesnoradio
---
generic object: DAList
template: x.collapsed_table_template
subject: |
  So far, you have listed...
content: |
  ${x.table.show(editable=False)}
---
generic object: DAList
template: x.question_text_table_template
content: |
  % if x.number_gathered() > 1:
  ${collapse_template(x.collapsed_table_template)}
  % endif
---
generic object: ALIndividual
template: x.gender_explanation_template
subject: |
  Why are you asking this? What if ${"I'm" if x is users[0] else "they're"} nonbinary?
content: |
  The DCH-0838 Record of Divorce or Annulment form needed to finalize a divorce in Michigan makes you select "male" or "female" for each party. Unfortunately it does not have a nonbinary option. Please select which option you want checked on the form.

  In marriages with children, there is another Michigan state form (DHS-1201D) that uses the terms Mother and Father. If you indicate you and your spouse have different genders, we will use the selected genders to fill out the form.
---
# ====================================================================
## questions
# ====================================================================
---
# --------------------------------------------------------------------
## exits
# --------------------------------------------------------------------
---
# TODO determine if we want specific exit screens for each reason (using templates)
# TODO maybe generate their documents thus far like LHI does?
id: exit_general
event: exit_general
question: |
  Sorry, this tool cannot help you.
subquestion: |
  You may want to contact a lawyer for help. You can use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) on Michigan Legal Help to find a lawyer or a legal services office near you.

  If you think you made a mistake, tap **Undo** and change the answer to this question.
action buttons:
  - label: Exit
    action: https://michiganlegalhelp.org/resources/family
    new window: True
    color: danger
    icon: right-from-bracket
---
id: exit_no_pending_divorce
event: exit_no_pending_divorce
question: |
  Sorry, this tool cannot help you.
subquestion: |
  You must have a pending Michigan divorce case to use this tool. This tool is only for completing your Judgment of Divorce and related papers in an existing divorce case. If you need to file a Michigan Divorce case, return to the Michigan Legal Help website to either the [Filing for Divorce with Children](https://michiganlegalhelp.org/resources/family/filing-divorce-children) Resource page or the [Filing for Divorce without Children](https://michiganlegalhelp.org/resources/family/filing-divorce-without-children) Resource page.

  You may want to contact a lawyer for help. You can use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) on Michigan Legal Help to find a lawyer or a legal services office near you.

  If you think you made a mistake, tap **Undo** and change the answer to this question.
action buttons:
  - label: Exit
    action: https://michiganlegalhelp.org/resources/family
    new window: True
    color: danger
    icon: right-from-bracket
---
id: exit_no_marriage_breakdown
event: exit_no_marriage_breakdown
question: |
  Sorry, this tool cannot help you.
subquestion: |
  If you are unable to testify to the breakdown of your marriage, you cannot use this tool to create a Judgment of Divorce.

  You may want to contact a lawyer for help. You can use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) on Michigan Legal Help to find a lawyer or a legal services office near you.

  If you think you made a mistake, tap **Undo** and change the answer to this question.
action buttons:
  - label: Exit
    action: https://michiganlegalhelp.org/resources/family
    new window: True
    color: danger
    icon: right-from-bracket
---
id: exit_jurisdiction
event: exit_jurisdiction
question: Sorry, you cannot use this tool
subquestion: |
  Sorry, you cannot use this tool to prepare your divorce forms in Michigan. 
  
  You or your spouse must have lived in Michigan for at least 180 days (six months) before using this tool and filing for divorce in Michigan. You may return to use this tool when one of you has lived in Michigan for at least 180 days. 

  If one of you has lived in Michigan for 180 days already, please use the **Review / Edit** link or the **${MLH_back_button_label}** button to update your information. 
  
  % if not other_parties[0].lives_in_Michigan:
  ${ collapse_template(spouse_MI_address_unknown_exit)}
  % endif
---
template: spouse_MI_address_unknown_exit
subject: What if my spouse lives in Michigan, but I don't know their current address?
content: |
  It may be possible for you to get divorced in Michigan, but it's important to talk to a lawyer first. 
  
  Your answers show that you don't know the defendant's current Michigan address, and their last known address is in another state. It could be hard to prove to the court that your spouse resides in Michigan. Residing in Michigan means more than being present. A residence is where someone has a permanent home and plans to remain.
---
id: exit_children
event: exit_children
question: |
  Sorry, this tool cannot help you.
subquestion: |
  If you and your spouse have a child together and both of you are not the child's legal parents, there may be complicated issues about parentage in your divorce. Contact a lawyer to help you. To learn more, read Separation and Divorce: An Overview for Same-sex Families. Use the Guide to Legal Help to look for a lawyer near you.

  You may want to contact a lawyer for help. You can use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) on Michigan Legal Help to find a lawyer or a legal services office near you.

  If you think you made a mistake, tap **Undo** and change the answer to this question.
action buttons:
  - label: Exit
    action: https://michiganlegalhelp.org/resources/family
    new window: True
    color: danger
    icon: right-from-bracket
---
# --------------------------------------------------------------------
## introduction
# --------------------------------------------------------------------
---
id: marriage.pending_divorce
question: |
  Pending divorce
fields:
  - label: Do you have a pending divorce case with this spouse in any court?
    field: marriage.pending_divorce
    datatype: yesnoradio
---
id: docket number
question: |
  Case number
subquestion: |
  ${ collapse_template(where_case_number) }

  Be certain to enter the "-DO" or "-DM" at the end of the number.
fields:
  - label: What is the case number?
    field: docket_number
    maxlength: 25
---
id: what is the user's role?
question: |
  Are you the Plaintiff or the Defendant in this case?
subquestion: |
  ${collapse_template(help_user_ask_role_template)}
fields:
  - label: What party are you in your case?
    field: user_ask_role
    label above field: True
    datatype: radio
    choices:
      - label: I am the Plaintiff
        value: plaintiff
      - label: I am the Defendant
        value: defendant
  - note: |
      Okay, you are the **Plaintiff** in this case. The other
      side is the Defendant.
    show if:
      variable: user_ask_role
      is: plaintiff
  - note: |
      Okay, you are the **Defendant** in this case. The other
      side is the Plaintiff.
    show if:
      variable: user_ask_role
      is: defendant
# TODO: commented out the below on 2/2/26. I think it's unnecessary. Delete if no problems seen in JOD_only tool.
#validation code: |
#  op_ask_role = "defendant" if user_ask_role == "plaintiff" else "plaintiff"
---
id: marriage.breakdown
question: |
  Marriage breakdown
subquestion: |
  Michigan law requires you to testify that there has been a breakdown of the marriage to the extent that the objects of matrimony have been destroyed and there remains no reasonable likelihood that your marriage can be preserved. This means that there has been a serious, permanent, marital breakdown. It means it is very unlikely that you and your spouse can work things out.
fields:
  - label: Has there been a breakdown of the marriage to the extent that the objects of matrimony have been destroyed and there remains no reasonable likelihood that the marriage can be preserved?
    field: marriage.breakdown
    datatype: yesnoradio
---
id: incompetent spouse
question: |
  Your spouse's legal competence
fields:
  - To the best of your knowledge, has a judge found your spouse to be legally incompetent?: spouse_is_incompetent
    datatype: yesnoradio    
  - note: |
      If your spouse does not file an answer to your divorce complaint, you may be entering a default judgment of divorce against him or her. You may not enter a default judgment against a person who is not legally competent to understand the divorce proceedings.
    show if:
      variable: spouse_is_incompetent
      is: True
---
id: military spouse
question: |
  Spouse in the military?
subquestion: |
  ${collapse_template(military_spouse_info)}
fields:
  - Is your spouse currently on active military duty in the United States armed forces?: spouse_is_in_military
    datatype: yesnoradio
  - note: |
      If your spouse is on active military duty, you may only use this tool to prepare your divorce forms if your spouse:
      
      * agrees to the divorce, 
      * agrees to all the terms of the divorce, and 
      * will sign a Consent Judgment of Divorce. 
      
      If your spouse is on active military duty and doesn't agree to the divorce or all the terms of the divorce, you may want to talk to a lawyer to help you complete your divorce.
    show if:
      variable: spouse_is_in_military
      is: True
  - Will you and your spouse be filing a Consent Judgment of Divorce?: military_spouse_agrees_consent_judgment
    datatype: radio
    choices:
      - Yes: yes
      - No: no
      - "I don't know": unknown
    show if:
      variable: spouse_is_in_military
      is: True
---
template: military_spouse_info
subject: What if I'm not sure?
content: |
  If your spouse is or may be on active military duty, you may only use this tool to prepare your divorce forms if your spouse agrees to the divorce, agrees to all of the terms of the divorce, and will sign a Consent Judgment of Divorce. 
  
  Please return to use this tool when you have determined whether your spouse is currently on active military duty. 
---
id: need temp order
question: Do you need a temporary order?
fields:
  - Do you need a temporary order to keep your spouse from transferring, hiding, selling, or getting rid of marital property or assets?: need_temporary_order
    datatype: yesnoradio
  - note: |
      **WARNING!** This tool may not be right for you. You cannot use this tool or the Michigan Legal Help website to get a temporary order. 
      
      Getting a temporary order to prevent a spouse from transferring, selling, hiding, or getting rid of property is not simple. You can still complete this tool to prepare your forms and begin the divorce process, but this tool will not create any motions for temporary orders or proposed temporary orders. 
      
      You may want to consider hiring a lawyer to help you ask the judge for a temporary restraining order. ${MLH_GUIDE_FULL}
    show if:
      variable: need_temporary_order
      is: True
  - Do you want to continue?: temporary_order_continue
    datatype: yesnoradio
    show if:
      variable: need_temporary_order
      is: True
---
id: marriage.have_pension_retirement
question: |
  Pension and/or retirement accounts
fields:
  - label: Do you or your spouse have a pension or retirement account?
    field: marriage.have_pension_retirement
    datatype: yesnoradio
---
if: marriage.have_pension_retirement
id: marriage.pension_retirement_accounts_keep_own
question: |
  Pension and/or retirement accounts
fields:
  - label: Do you each plan to keep your own accounts or do you want to ask the judge to divide your accounts?
    field: marriage.pension_retirement_accounts_keep_own
    input type: radio
    choices:
      - label: We will each keep our own account(s)
        value: True
      - label: I want the judge to divide our account(s)
        value: False
---
if: marriage.have_pension_retirement and marriage.pension_retirement_accounts_keep_own
id: pension_retirement_accounts_keep
question: |
  Pension and/or retirement accounts
subquestion: |
  You may have a right to part of your spouse's pension or retirement account, and your spouse may have a right to part of yours. This is an important decision that can impact your future. Sometimes it is hard to know the full value of a pension or retirement account, especially if an account includes future benefits. If you don't know all the details of each person's pension and retirement accounts, you may want to consider talking to a lawyer before you decide how you want to divide them.
fields:
  - label: Do you want to continue with the tool, knowing that you will not get a share of your spouse's pension or retirement account and will not be able to return to court in the future and ask for a change?
    field: marriage.pension_retirement_accounts_continue
    datatype: yesnoradio
---
if: marriage.have_pension_retirement and not marriage.pension_retirement_accounts_keep_own
id: pension_retirement_accounts_divide
question: |
  Pension and/or retirement accounts
subquestion: |
  WARNING! This tool may not be right for you. Dividing pensions or retirement accounts is not simple. Neither this tool nor the Michigan Legal Help website will divide your pensions or retirement accounts. You can still complete this tool to prepare your Judgment of Divorce. The Judgment of Divorce produced after this tool will state that you have pensions or retirement accounts to divide, but the Judgment of Divorce will not divide them. You may want to consider hiring a lawyer to ask the judge to divide your pensions or retirement accounts. A lawyer can also draft the special order that is required.

  If you want to hire a lawyer to help you divide your pensions or retirement accounts and finish your case, you can find referral information in the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) section of the Michigan Legal Help website.
fields:
  - label: Do you want to continue?
    field: marriage.pension_retirement_accounts_continue
    datatype: yesnoradio
---
id: marriage.have_business
question: |
  Business ownership
fields:
  - label: Do you or your spouse own a business?
    field: marriage.have_business
    datatype: yesnoradio
---
id: marriage.have_experienced_domestic_violence
question: |
  Domestic violence
fields:
  - label: Have you experienced domestic violence or threats of domestic violence by your spouse?
    field: marriage.have_experienced_domestic_violence
    datatype: yesnoradio
---
if: marriage.have_experienced_domestic_violence
id: marriage.have_experienced_domestic_violence_continue
question: |
  Domestic violence
subquestion: |
  Domestic violence is often at its worst when a relationship ends. It is important to take steps to be as safe as possible before you start a divorce. If there has been verbal, emotional, or physical abuse in your marriage, you may want to find a lawyer. Your local legal aid office or domestic violence agency may be able to help you. 
  
  To learn about how domestic violence can affect a divorce case and what you can do to keep safe, read [Domestic Violence and Divorce](https://michiganlegalhelp.org/resources/family/domestic-violence-and-divorce). To find a lawyer and contact information for local domestic violence agencies, use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help).
fields:
  - label: Do you want to continue with the tool now?
    field: marriage.have_experienced_domestic_violence_continue
    datatype: yesnoradio
---
# --------------------------------------------------------------------
## users[0]
# --------------------------------------------------------------------
---
if: tool_ID == "JOD_only"
id: users[0].previous_last_name 
question: |
  Previous last name
fields:
  - label: Was your last name something _other than_ ${users[0].name.last} before your marriage?
    field: users[0].has_previous_name
    datatype: yesnoradio
  - label: Please enter your last name before your marriage
    field: users[0].previous_last_name
    show if: users[0].has_previous_name
validation code: |
  if not users[0].has_previous_name:
    users[0].invalidate_attr("previous_last_name")
---
if: tool_ID in ["divorce_complaint", "divorce_answer"]
id: users[0].previous_name 
question: |
  Previous name
fields:
  - label: Did you have a different name before this marriage?
    field: users[0].has_previous_name
    datatype: yesnoradio
  - note: |
      Please enter your full name from before your marriage.
    show if: users[0].has_previous_name
  - label: First name
    field: users[0].previous_first_name
    show if: users[0].has_previous_name
  - label: Middle name
    field: users[0].previous_middle_name
    required: False
    show if: users[0].has_previous_name
  - label: Last name
    field: users[0].previous_last_name
    show if: users[0].has_previous_name
validation code: |
  if not users[0].has_previous_name:
    users[0].invalidate_attr("previous_last_name", "previous_first_name", "previous_middle_name")
---
id: users[0].new_last_name_yn
question: |
  Change last name
subquestion: |
  ${collapse_template(users[0].can_i_change_my_name_later_template)}

  ${collapse_template(users[0].what_can_i_change_my_last_name_to_template)}
fields:
  - label: Would you like the judge to allow you to change your last name as part of your divorce?
    field: users[0].new_last_name_yn
    datatype: yesnoradio
  - note: |
      Michigan law specifically says that **a woman** may ask the court to change her last name as part of a divorce case. If you're not a woman and you want to ask the court to change your last name, you may want to talk to a lawyer.
    show if:
      variable: users[0].new_last_name_yn
      is: True
  - label: What is the **last name** that you want the judge to allow you to use?
    field: users[0].new_last_name
    show if: users[0].new_last_name_yn
validation code: |
  if not users[0].new_last_name_yn:
    users[0].invalidate_attr("new_last_name")
---
template: users[0].what_can_i_change_my_last_name_to_template
subject: |
  What can I change my last name to?
content: |
  As part of the divorce, a woman can ask the judge to change her name to any of the following:

  - Her last name at birth,
  - Her last before marriage to the spouse she is divorcing, or
  - Any other last name if she isnâ€™t trying to change her name to commit fraud or for some other harmful reason.
---
template: users[0].can_i_change_my_name_later_template
subject: |
  Can I change my name later?
content: |
  If you do not want to get your name changed as part of your divorce, you can still ask for a name change later. To do this, file a Petition to Change Name any time after your divorce is final. There is a filing fee for this petition unless you qualify to have your fees waived. There are also other costs related to the petition that cannot be waived.
---
id: users[0].gender
sets: users[0].gender
question: |
  What is your gender?
subquestion: |
  ${collapse_template(users[0].gender_explanation_template)}
fields:
  - label: Gender
    field: users[0].gender
    input type: radio
    choices:
      - Female: female
      - Male: male
---
id: users[0].marriage_number
question: |
  Marriage
fields:
  - label: Please select the number of this marriage for you
    field: users[0].marriage_number
    code: |
      [{"label": ordinal(y, capitalize=True), "value": ordinal(y)} for y in range(10)]
---
id: users[0].birthdate
question: |
  When were you born?
fields:
  - label: Birthdate
    field: users[0].birthdate
    datatype: BirthDate
---
id: users[0].birthplace
field: users[0].birthplace
question: |
  Where were you born?
fields:
  - label: Please enter the state or country where you were born
    field: users[0].birthplace
---
id: confidential_contact_info_yn
question: |
  Contact information confidentiality
subquestion: |
  All of the information that you enter in this tool, including your address and telephone information, will be included on forms that you file with the court and give to your spouse. If you fear for your safety if this information is known by your spouse or someone else, proceed with caution. **Do not use an address or telephone number that you want to keep confidential in this tool or on your court forms.**

  Keep in mind that your divorce file is a public record and anyone could ask to look at it and see your address. To keep your address confidential, you need to have one of the following:

  - A Personal Protection Order or other order which keeps your address confidential, OR

  - You need to state that you and/or your children's safety would be at risk if you disclose your address. This is done by filing a Uniform Child Custody Jurisdiction Enforcement Act Affidavit with the court.

  ${collapse_template(confidential_contact_info_yn_more_template)}
fields:
  - label: Do you want to keep your residential address and telephone number confidential because you have a Personal Protection Order or because disclosing it would place you and/or your children at risk?
    field: confidential_contact_info_yn
    datatype: yesnoradio
validation code: | ## for review screen functionality ##
  users[0].address.invalidate_attr("address", "unit", "city", "state", "zip", "country", "county")
  users[0].mailing_address.invalidate_attr("yesno", "address", "unit", "city", "state", "zip", "country")
  users[0].invalidate_attr("village_or_township_yn", "village_or_township", "no_phone_number", "phone_number", "has_lived_6_months_MI")
  users[0].delattr("lives_in_Michigan", "ten_days_in_county")
---
id: confidential_contact_info_yn_more_template
template: confidential_contact_info_yn_more_template
subject: |
  Click here for more information.
content: |
  Help!

  If you intend to keep your address confidential, give a different mailing address (such as a P.O. Box or the address of a friend or relative) and different telephone number (such as the telephone number of a friend or relative), where the court and your spouse can contact you regarding your case.

  Be aware that if your address is included on the papers that your spouse already filed, it is not confidential. Also, please be aware that some of your divorce forms will be incomplete if you do not supply your home address and/or the home address of your children. The court may require you to provide this information at some point during or after your case.

  If you fear for the safety of you or your children if your address is known by your spouse or someone else, it is strongly recommended that you hire a lawyer and do not do your divorce on your own. Your local domestic violence agency may also be able to help you. To learn more about domestic violence and to find contact information for helpful organizations, please see the [Domestic Violence and Divorce Resource pages](https://michiganlegalhelp.org/resources/personal-safety). You can also use the [Guide to Legal Help](https://michiganlegalhelp.org/guide-to-legal-help) to look for a lawyer or legal services near you.
---
id: your address
question: |
  Please enter your ${"safe mailing address" if confidential_contact_info_yn else "address"}
fields:
  - label: Street Address or PO Box
    field: users[0].address.address
    address autocomplete: True
  - label: Apartment, suite, etc
    field: users[0].address.unit
    required: False
  - label: City
    field: users[0].address.city
  - label: State or Province (two-letter abbreviation for U.S. states)
    field: users[0].address.state
    default: MI
    input type: datalist
    code: |
      states_list()
    required: False
  - label: Zip or Postal Code
    field: users[0].address.zip
    required: False
  - label: Country or Territory
    field: users[0].address.country
    default: "US"
    code: |
      countries_list()
    required: False
validation code: |
  validate_us_state(users[0].address)
  ## for review screen functionality ##
  users[0].address.invalidate_attr("county")
  users[0].delattr("lives_in_Michigan", "ten_days_in_county")
  users[0].invalidate_attr("village_or_township_yn", "village_or_township")
---
if: not confidential_contact_info_yn and tool_ID == "divorce_complaint"
id: user jurisdiction/venue questions address no confidential
question: Michigan residence
fields:
  - label: You entered a **Michigan** home address. Is that correct?
    field: users[0].lives_in_Michigan
    datatype: radio
    choices:
      - "Yes, I live in Michigan.": True
      - "No, I **don't** live in Michigan.": False
    show if:
      code: |
        users[0].address.state in ["Michigan", "MI"]
  - label: You entered a home address **outside Michigan**. Is that correct?
    field: users[0].lives_in_Michigan
    datatype: radio
    choices:
      - "Yes, I live **outside** Michigan.": False
      - "No, I live **in Michigan.**": True
    show if:
      code: |
        users[0].address.state not in ["Michigan", "MI"]
  - note: |
      Please tap **${MLH_back_button_label}** and update your address so that the state says "MI" or "Michigan".
    js show if: |
      ${ "true" if users[0].address.state not in ["Michigan", "MI"] else "false" } && val("users[0].lives_in_Michigan") === true
  - note: |
      Please tap **${MLH_back_button_label}** and update your address so that it does **not** list Michigan as your state.
    js show if: |
      ${ "true" if users[0].address.state in ["Michigan", "MI"] else "false" } && val("users[0].lives_in_Michigan") === false
  - Have you lived in Michigan for the last 180 days or more, since ${ today().minus(days=180) }?: users[0].has_lived_6_months_MI
    datatype: yesnoradio
    js show if: |
      ${ "true" if users[0].address.state in ["Michigan", "MI"] else "false" } && val("users[0].lives_in_Michigan") === true
  - What county do you live in?: users[0].address.county
    code: court_list._load_courts()["address_county"].unique()
    js show if: |
      ${ "true" if users[0].address.state in ["Michigan", "MI"] else "false" } && val("users[0].lives_in_Michigan") === true
validation code: |
  if users[0].lives_in_Michigan and users[0].address.state not in ["Michigan", "MI"]: 
    validation_error('If you live in Michigan, tap "Undo" and update your address.', field="users[0].lives_in_Michigan")
  if not users[0].lives_in_Michigan and users[0].address.state in ["Michigan", "MI"]:
    validation_error('If you do not live in Michigan, tap "Undo" and update your address.', field="users[0].lives_in_Michigan")
## TODO: possibly add screener question earlier in interview "Have you or your spouse lived in Michigan for the last 180 days or more ${ today().minus(days=180) }?"
---
if: confidential_contact_info_yn and tool_ID == "divorce_complaint"
id: user jurisdiction/venue questions, address confidential
question: Michigan residence
fields:
  - label: Do you live in Michigan?
    field: users[0].lives_in_Michigan
    datatype: radio
    choices:
      - "Yes, I live in Michigan.": True
      - "No, I **don't** live in Michigan.": False
  - Have you lived in Michigan for the last 180 days or more, since ${ today().minus(days=180) }?: users[0].has_lived_6_months_MI
    datatype: yesnoradio
    show if: users[0].lives_in_Michigan
  - What county do you live in?: users[0].address.county
    code: court_list._load_courts()["address_county"].unique()
    show if: users[0].lives_in_Michigan
---
if: tool_ID == "divorce_complaint" and users[0].lives_in_Michigan and users[0].has_lived_6_months_MI
id: 10-day test user
question: Time in ${ users[0].address.county } County
fields:
  - Have you lived in ${ users[0].address.county } County for the last 10 days or more?: users[0].ten_days_in_county
    datatype: yesnoradio
---
if: tool_ID == "JOD_only" and users[0].address.state == "MI"
id: users[0].address.county
question: |
  County
fields:
  - What county do you live in?: users[0].address.county
    code: court_list._load_courts()["address_county"].unique()
---
if: (tool_ID == "JOD_only" and not users[0].address.state == "MI") or (tool_ID == "divorce_complaint" and not users[0].lives_in_Michigan)
id: users[0].address.county
question: |
  County
fields:
  - What county do you live in?: users[0].address.county
---
id: users[0].village_or_township
question: |
  Village or township
fields:
  - label: Do you live in a **township or village** other than ${users[0].address.city}?
    field: users[0].village_or_township_yn
    datatype: yesnoradio
  - label: Village or township
    field: users[0].village_or_township
    show if: users[0].village_or_township_yn
validation code: |
  if not users[0].village_or_township_yn:
    users[0].invalidate_attr("village_or_township")
---
id: users[0].mailing_address
question: |
  Different mailing address
fields:
  - label: Do you have a different mailing address?
    field: users[0].mailing_address.yesno
    datatype: yesnoradio
  - note: |
      Please enter your mailing address
    show if: users[0].mailing_address.yesno
  - label: Street Address or PO Box
    field: users[0].mailing_address.address
    address autocomplete: True
    show if: users[0].mailing_address.yesno
  - label: Apartment, suite, etc
    field: users[0].mailing_address.unit
    required: False
    show if: users[0].mailing_address.yesno
  - label: City
    field: users[0].mailing_address.city
    show if: users[0].mailing_address.yesno
  - label: State or Province (two-letter abbreviation for U.S. states)
    field: users[0].mailing_address.state
    default: MI
    input type: datalist
    code: |
      states_list()
    required: False
    show if: users[0].mailing_address.yesno
  - label: Zip or Postal Code
    field: users[0].mailing_address.zip
    required: False
    show if: users[0].mailing_address.yesno
  - label: Country or Territory
    field: users[0].mailing_address.country
    default: "US"
    code: |
      countries_list()
    required: False
    show if: users[0].mailing_address.yesno
validation code: |
  if users[0].mailing_address.yesno:
    validate_us_state(users[0].mailing_address)
  else:
    users[0].mailing_address.invalidate_attr("address")
    users[0].mailing_address.invalidate_attr("unit")
    users[0].mailing_address.invalidate_attr("city")
    users[0].mailing_address.invalidate_attr("state")
    users[0].mailing_address.invalidate_attr("zip")
    users[0].mailing_address.invalidate_attr("country")
---
id: users[0].phone_number
question: |
  Phone number
subquestion: |
  % if confidential_contact_info_yn:
  Please enter a safe telephone number where the court can reach you, starting with the area code. This telephone number will appear on papers filed with the court and served on your spouse. **Do not enter a telephone number that you want to keep confidential.**
  % else:
  Enter a telephone number where the court can reach you, starting with the area code.
  % endif
fields:
  - label: |
      % if confidential_contact_info_yn:
      Safe phone
      % else:
      Phone (home or cell)
      % endif
    field: users[0].phone_number
    show if:
      variable: users[0].no_phone_number
      is: False
  - label: I do not have a phone.
    field: users[0].no_phone_number
    required: False
    datatype: yesno
  - Is this a "cell" or "home" phone number? (Just choose the closest answer.): users[0].phone_type
    datatype: radio
    choices:
      - Cell: cell
      - Home: home
    js show if: |
      val("users[0].no_phone_number") === false && ${ "true" if tool_ID != "JOD_only" else "false" }
# TODO ask AB if this is OK. It's very annoying that it only asks for 2 phone types for the FOC23 as far as I can tell. Otherwise defaults to putting "home number everywhere" (or "safe" number if that's chosen) and neither phone type is required. 
---
id: users[0].email
question: |
  Email address
fields:
  - label: What is your email address?
    field: users[0].email
    datatype: email
    required: False
---
# --------------------------------------------------------------------
## other_parties[0]
# --------------------------------------------------------------------
---
sets:
  - other_parties[0].name.first
  - other_parties[0].name.last
  - other_parties[0].name.middle
  - other_parties[0].name.suffix
id: other_parties[0].name.first
question: |
  What is your spouse's name?
fields:
  - code: |
      other_parties[0].name_fields(person_or_business="person")
---
if: tool_ID == "JOD_only"
id: other_parties[0].previous_last_name
question: |
  Previous last name
fields:
  - label: Was your spouse's last name something _other than_ ${other_parties[0].name.last} before your marriage?
    field: other_parties[0].has_previous_name
    datatype: yesnoradio
  - label: Please enter your spouse's last name before your marriage
    field: other_parties[0].previous_last_name
    show if: other_parties[0].has_previous_name
validation code: |
  if not other_parties[0].has_previous_name:
    other_parties[0].invalidate_attr("previous_last_name")
---
if: tool_ID in ["divorce_complaint", "divorce_answer"]
id: other_parties[0].previous_name 
question: |
  Previous name
fields:
  - label: Did your spouse have a different name before this marriage?
    field: other_parties[0].has_previous_name
    datatype: yesnoradio
  - note: |
      Please enter your spouse's full name from before your marriage.
    show if: other_parties[0].has_previous_name
  - label: First name
    field: other_parties[0].previous_first_name
    show if: other_parties[0].has_previous_name
  - label: Middle name
    field: other_parties[0].previous_middle_name
    required: False
    show if: other_parties[0].has_previous_name
  - label: Last name
    field: other_parties[0].previous_last_name
    show if: other_parties[0].has_previous_name
validation code: |
  if not other_parties[0].has_previous_name:
    other_parties[0].invalidate_attr("previous_last_name", "previous_first_name", "previous_middle_name")
---
id: other_parties[0].gender
sets: other_parties[0].gender
question: |
  What is your spouse's gender?
subquestion: |
  ${collapse_template(other_parties[0].gender_explanation_template)}
fields:
  - label: Gender
    field: other_parties[0].gender
    input type: radio
    choices:
      - Female: female
      - Male: male
---
id: other_parties[0].marriage_number
question: |
  Marriage
fields:
  - label: Please select the number of this marriage for your spouse
    field: other_parties[0].marriage_number
    code: |
      [{"label": ordinal(y, capitalize=True), "value": ordinal(y)} for y in range(10)]
---
id: other_parties[0].birthdate
question: |
  When was your spouse born?
fields:
  - label: Birthdate
    field: other_parties[0].birthdate
    datatype: BirthDate
---
id: other_parties[0].birthplace
field: other_parties[0].birthplace
question: |
  Where was your spouse born?
fields:
  - label: Please enter the state or country where your spouse was born
    field: other_parties[0].birthplace
---
id: your spouse's address
question: |
  Please enter your spouse's last known home address
fields:
  - label: Street Address or PO Box
    field: other_parties[0].address.address
    address autocomplete: True
  - label: Apartment, suite, etc
    field: other_parties[0].address.unit
    required: False
  - label: City
    field: other_parties[0].address.city
  - label: State or Province (two-letter abbreviation for U.S. states)
    field: other_parties[0].address.state
    default: MI
    input type: datalist
    code: |
      states_list()
    required: False
  - label: Zip or Postal Code
    field: other_parties[0].address.zip
    required: False
  - label: Country or Territory
    field: other_parties[0].address.country
    default: "US"
    code: |
      countries_list()
    required: False
validation code: |
  validate_us_state(other_parties[0].address)
  ## for review screen functionality ##
  other_parties[0].delattr("lives_in_Michigan", "ten_days_in_county")
  other_parties[0].address.invalidate_attr("county")
  other_parties[0].invalidate_attr("village_or_township_yn", "village_or_township")
---
if: tool_ID == "divorce_complaint"
id: OP jurisdiction/venue questions
question: |
  % if other_parties[0].address.state in ["Michigan", "MI"]:
  Last known home address in Michigan
  % else:
  Last known home address outside Michigan
  % endif
fields:
  - label: You entered a **Michigan** address for ${ other_parties[0] }. Is that correct?
    field: other_parties[0].lives_in_Michigan
    datatype: radio
    choices:
      - "Yes, their last known home address is in Michigan.": True
      - "No, their last known home address is **not** in Michigan.": False
    show if:
      code: |
        other_parties[0].address.state in ["Michigan", "MI"]
  - label: You said ${ other_parties[0] }'s last known home address is **outside Michigan**. Is that correct?
    field: other_parties[0].lives_in_Michigan
    datatype: radio
    choices:
      - "Yes, their last known home address is **outside** Michigan.": False
      - "No, their last known home address is **in Michigan.**": True
    show if:
      code: |
        other_parties[0].address.state not in ["Michigan", "MI"]
  - note: |
      Please tap **${MLH_back_button_label}** and update your spouse's address so that the state says "MI" or "Michigan".
    js show if: |
      ${ "true" if other_parties[0].address.state not in ["Michigan", "MI"] else "false" } && val("other_parties[0].lives_in_Michigan") === true
  - note: |
      Please tap **${MLH_back_button_label}** and update your spouse's address so that it does **not** list Michigan as the state.
    js show if: |
      ${ "true" if other_parties[0].address.state in ["Michigan", "MI"] else "false" } && val("other_parties[0].lives_in_Michigan") === false
  - Has ${ other_parties[0] } lived in Michigan for the last 180 days or more, since ${ today().minus(days=180) }?: other_parties[0].has_lived_6_months_MI
    datatype: yesnoradio
    js show if: |
      ${ "true" if other_parties[0].address.state in ["Michigan", "MI"] else "false" } && val("other_parties[0].lives_in_Michigan") === true
  - What county does ${ other_parties[0] } live in?: other_parties[0].address.county
    code: court_list._load_courts()["address_county"].unique()
    js show if: |
      ${ "true" if other_parties[0].address.state in ["Michigan", "MI"] else "false" } && val("other_parties[0].lives_in_Michigan") === true
validation code: |
  if other_parties[0].lives_in_Michigan and other_parties[0].address.state not in ["Michigan", "MI"]: 
    validation_error('If your spouse lives in Michigan, tap "Undo" and update their address.', field="other_parties[0].lives_in_Michigan")
  if not other_parties[0].lives_in_Michigan and other_parties[0].address.state in ["Michigan", "MI"]:
    validation_error('If your spouse does not live in Michigan, tap "Undo" and update their address.', field="other_parties[0].lives_in_Michigan")  
---
if: tool_ID == "divorce_complaint" and other_parties[0].has_lived_6_months_MI
id: 10-day test OP
question: Time in ${ other_parties[0].address.county } County
fields:
  - Has ${ other_parties[0] } lived in ${ other_parties[0].address.county } County for the last 10 days or more?: other_parties[0].ten_days_in_county
    datatype: yesnoradio
---
if: tool_ID == "JOD_only" and other_parties[0].address.state == "MI"
id: other_parties[0].address.county
continue button field: just_check_op_county
question: |
  County
fields:
  - What county does your spouse live in?: other_parties[0].address.county
    code: court_list._load_courts()["address_county"].unique()
---
if: (tool_ID == "JOD_only" and other_parties[0].address.state != "MI") or (tool_ID == "divorce_complaint" and not other_parties[0].lives_in_Michigan)
id: other_parties[0].address.county
continue button field: just_check_op_county
question: |
  County
fields:
  - What county does your spouse live in?: other_parties[0].address.county
---
id: other_parties[0].village_or_township
question: |
  Spouse's village or township
fields:
  - label: Does your spouse live in a **township or village** other than ${other_parties[0].address.city}?
    field: other_parties[0].village_or_township_yn
    datatype: yesnoradio
  - label: Village or township
    field: other_parties[0].village_or_township
    show if: other_parties[0].village_or_township_yn
validation code: |
  if not other_parties[0].village_or_township_yn:
    other_parties[0].invalidate_attr("village_or_township")
---
id: other_parties[0].mailing_address
question: |
  Spouse's different mailing address
fields:
  - label: Does your spouse have a different mailing address?
    field: other_parties[0].mailing_address.yesno
    datatype: yesnoradio
  - note: |
      Please enter your spouse's mailing address
    show if: other_parties[0].mailing_address.yesno
  - label: Street Address or PO Box
    field: other_parties[0].mailing_address.address
    address autocomplete: True
    show if: other_parties[0].mailing_address.yesno
  - label: Apartment, suite, etc
    field: other_parties[0].mailing_address.unit
    required: False
    show if: other_parties[0].mailing_address.yesno
  - label: City
    field: other_parties[0].mailing_address.city
    show if: other_parties[0].mailing_address.yesno
  - label: State or Province (two-letter abbreviation for U.S. states)
    field: other_parties[0].mailing_address.state
    default: MI
    input type: datalist
    code: |
      states_list()
    required: False
    show if: other_parties[0].mailing_address.yesno
  - label: Zip or Postal Code
    field: other_parties[0].mailing_address.zip
    required: False
    show if: other_parties[0].mailing_address.yesno
  - label: Country or Territory
    field: other_parties[0].mailing_address.country
    default: "US"
    code: |
      countries_list()
    required: False
    show if: other_parties[0].mailing_address.yesno
validation code: |
  if other_parties[0].mailing_address.yesno:
    validate_us_state(other_parties[0].mailing_address)
  else:
    other_parties[0].mailing_address.invalidate_attr("address")
    other_parties[0].mailing_address.invalidate_attr("unit")
    other_parties[0].mailing_address.invalidate_attr("city")
    other_parties[0].mailing_address.invalidate_attr("state")
    other_parties[0].mailing_address.invalidate_attr("zip")
    other_parties[0].mailing_address.invalidate_attr("country")
---
id: other_parties[0].phone_number
question: |
  Spouse's phone number
fields:
  - label: Enter a telephone number where the court can reach your spouse, starting with the area code
    field: other_parties[0].phone_number
    show if:
      variable: other_parties[0].no_phone_number
      is: False
  - label: My spouse does not have a phone or I don't know their number.
    field: other_parties[0].no_phone_number
    required: False
    datatype: yesno
  - Is this a "cell" or "home" phone number? (Make your best guess, if unsure.): other_parties[0].phone_type
    datatype: radio
    choices:
      - Cell: cell
      - Home: home
    js show if: |
      val("other_parties[0].no_phone_number") === false && ${ "true" if tool_ID != "JOD_only" else "false" }
# TODO ask AB if this is OK. It's very annoying that it only asks for 2 phone types for the FOC23 as far as I can tell. Otherwise defaults to putting "home number everywhere" (or "safe" number if that's chosen) and neither phone type is required. 

---
id: other_parties[0].email
question: |
  Spouse's email address
fields:
  - label: What is your spouse's email address?
    field: other_parties[0].email
    datatype: email
    required: False
---
# --------------------------------------------------------------------
## other_parties[0].attorney
# --------------------------------------------------------------------
---
sets:
  - other_parties[0].attorney.name.first
  - other_parties[0].attorney.name.last
  - other_parties[0].attorney.name.middle
  - other_parties[0].attorney.name.suffix
  - other_parties[0].attorney.bar_number
id: lawyer name and bar
generic object: ALPeopleList
question: |
  What is the lawyer's name and bar number?
subquestion:
  ${collapse_template(help_user_find_bar_number_template)}
fields:
  - code: |
      other_parties[0].attorney.name_fields()
  - label: |
      Bar number
      (include the 'P')
    field: other_parties[0].attorney.bar_number
    required: False
---
# --------------------------------------------------------------------
## venue
# --------------------------------------------------------------------
---
if: tool_ID == "divorce_complaint" and len(all_potential_venue_options) == 1 or (len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case and (len(current_venue_options) in [2, 0] or (len(current_venue_options) == 1 and prior_family_cases[separate_maintenance_case_index].county in current_venue_options)))
id: venue (single option)
question: Where to file your divorce
continue button field: venue
subquestion: |
  % if len(all_potential_venue_options) == 1:
  You only meet the requirements to file your divorce in ${ county_choice } County. Your divorce forms will be prepared using ${ county_choice } as the filing county.  
  % elif len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case:
  Because of your earlier separate maintenance case, you must file in ${ prior_family_cases[separate_maintenance_case_index].county } County. Your divorce forms will be prepared using ${ county_choice } as the filing county.  
  % endif
  % if len(current_venue_options) == 0:
  
  You **must wait** to file until you or your spouse have lived in ${ county_choice } County for the last ten days or more.
  % endif

fields:
  - I understand that I **must wait** until my spouse or I have lived in ${ county_choice } County for ten days or more before I can file for divorce.: understands_waiting_period
    required: True
    datatype: yesno
    show if:
      code: |
        len(current_venue_options) == 0
---
if: tool_ID == "divorce_complaint" and len(all_potential_venue_options) == 2 and not (there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case)
id: venue (normal choice)
question: Where to file your divorce
continue button field: venue
subquestion: |
  You can choose to file in either ${ users[0].address.county } County or ${ other_parties[0].address.county } County. 
  % if not users[0].ten_days_in_county:
  
  You **must wait** to file in **${ users[0].address.county } County** until you have lived there for the last ten days or more.
  % endif
  % if not other_parties[0].ten_days_in_county:
  
  You **must wait** to file in **${ other_parties[0].address.county } County** until your spouse has lived there for the last ten days or more.
  % endif
fields:
  - Select the county where you will file your divorce.: county_choice
    input type: radio
    code: all_potential_venue_options
  - I understand that I **must wait until I have lived in ${ users[0].address.county } County for ten days** or more before I can file for divorce.: understands_waiting_period
    required: True
    datatype: yesno
    js show if: |
        val("county_choice") === ${ json.dumps(users[0].address.county) } && ${ json.dumps(users[0].ten_days_in_county) } === false 
  - I understand that I **must wait until my spouse has lived in ${ other_parties[0].address.county } County for ten days** or more before I can file for divorce.: understands_waiting_period
    required: True
    datatype: yesno
    js show if: |
        val("county_choice") === ${ json.dumps(other_parties[0].address.county) } && ${ json.dumps(other_parties[0].ten_days_in_county) } === false 
---
if: tool_ID == "divorce_complaint" and len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case and len(current_venue_options) == 1 and prior_family_cases[separate_maintenance_case_index].county not in current_venue_options
id: venue (weird separate maintenance choice)
question: Where to file your divorce
continue button field: venue
subquestion: |
  % if prior_family_cases[separate_maintenance_case_index].county == users[0].address.county:
  Where you will file depends on **when** you will file:
  
  * After you have lived in ${ users[0].address.county } County for *ten days or more,* you **must file** there. (Because of your past separate maintenance case in that county.)
  * However, if you want to file your divorce case **before** that, you must file in ${ other_parties[0].address.county } County. (Because you can only file in a county where one spouse has already lived for 10 days.)
  % elif prior_family_cases[separate_maintenance_case_index].county == other_parties[0].address.county:
  Where you will file depends on **when** you will file:
  
  * After your spouse has lived in ${ other_parties[0].address.county } County for *ten days or more,* you **must file** there. (This is because of your past separate maintenance case in that county.)
  * However, if you want to file your divorce case **before** that, you must file in ${ users[0].address.county } County. (This is because you can only file in a county where one spouse has already lived for 10 days.)
  % endif  

fields:
  - Select when and where you will file your divorce.: county_choice
    input type: radio
    choices:
      - "I will **wait** until I have lived 10 days in ${ users[0].address.county } County and file in ${ users[0].address.county }": ${ users[0].address.county }
      - "I will **file now** in ${ other_parties[0].address.county } County, before I have lived for 10 days in my current county.": ${ other_parties[0].address.county }
    show if:
      code: |
        prior_family_cases[separate_maintenance_case_index].county == users[0].address.county
  - Select the county where you will file your divorce.: county_choice
    input type: radio
    choices:
      - "I will **wait** until my spouse has lived 10 days in ${ other_parties[0].address.county } County and file in ${ other_parties[0].address.county }": ${ other_parties[0].address.county }
      - "I will **file now** in ${ users[0].address.county } County, before my spouse has lived 10 days in their current county.": ${ users[0].address.county }
    show if:
      code: |
        prior_family_cases[separate_maintenance_case_index].county == other_parties[0].address.county
  - note: |
      **Important!** Please read carefully and confirm:
    js show if: |
      val("county_choice") === ${ json.dumps(users[0].address.county) } || val("county_choice") === ${ json.dumps(other_parties[0].address.county) }
  - I understand that I **must wait** until I have lived in ${ users[0].address.county } County for ten days or more before I file for divorce.: understands_waiting_period
    required: True
    datatype: yesno
    js show if: |
        val("county_choice") === ${ json.dumps(users[0].address.county) } && ${ json.dumps(users[0].ten_days_in_county) } === false 
  - I understand that I **must wait** until my spouse has lived in ${ other_parties[0].address.county } County for ten days or more before I file for divorce.: understands_waiting_period
    required: True
    datatype: yesno
    js show if: |
        val("county_choice") === ${ json.dumps(other_parties[0].address.county) } && ${ json.dumps(other_parties[0].ten_days_in_county) } === false 
  - I understand that if I want to file in ${ users[0].address.county } County, I need to do so *before my spouse has lived in their current county for 10 days* or more. If I miss that deadline, I will update this tool and get new forms.: understands_waiting_period
    required: True
    datatype: yesno
    js show if: |
        val("county_choice") === ${ json.dumps(users[0].address.county) } && ${ json.dumps(other_parties[0].ten_days_in_county) } === false 
  - I understand that if I want to file in ${ other_parties[0].address.county } County, I need to do so *before I have lived in my current county for 10 days* or more. If I miss that deadline, I will update this tool and get new forms.: understands_waiting_period
    required: True
    datatype: yesno
    js show if: |
        val("county_choice") === ${ json.dumps(other_parties[0].address.county) } && ${ json.dumps(users[0].ten_days_in_county) } === false 
---
if: tool_ID == "divorce_complaint"
code: |
  current_venue_options = []
  all_potential_venue_options = []
  
  if users[0].lives_in_Michigan and users[0].has_lived_6_months_MI:
    all_potential_venue_options.append(users[0].address.county)
    if users[0].ten_days_in_county:
      current_venue_options.append(users[0].address.county)
  if other_parties[0].lives_in_Michigan and other_parties[0].has_lived_6_months_MI:
    if other_parties[0].address.county not in all_potential_venue_options:
      all_potential_venue_options.append(other_parties[0].address.county)
    if other_parties[0].ten_days_in_county and other_parties[0].address.county not in current_venue_options:
      current_venue_options.append(other_parties[0].address.county)

  set_venue_lists = True
---
if: tool_ID == "divorce_complaint"
id: divorce complaint venue logic
code: |
  undefine("county_choice")
  
  if len(all_potential_venue_options) == 1:
    county_choice = all_potential_venue_options[0]
  elif len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case:
    if len(current_venue_options) in [2, 0]:
      county_choice = prior_family_cases[separate_maintenance_case_index].county
    # elif len(current_venue_options) == 1 and prior_family_cases[separate_maintenance_case_index].county not in current_venue_options:
      # show the special weird choice question
    elif len(current_venue_options) == 1 and prior_family_cases[separate_maintenance_case_index].county in current_venue_options:
      county_choice = prior_family_cases[separate_maintenance_case_index].county
  # elif len(all_potential_venue_options) == 2 and not (there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case):
    # choice with warnings for any options that aren't already at 10 days

  check_for_required_venue = True
# commented out lines above are there to help show full list of options for determining venue
---
if: tool_ID == "divorce_complaint"
id: separate maintenance case check logic
code: |
  there_is_venue_controlling_separate_maintenance_case = False
  if there_are_marital_children and prior_family_cases.there_are_any:
    for i, case in enumerate(prior_family_cases):
      if case.type == "separate_maintenance" and case.status == "ended_with_order" and case.involved_custody_pt_support and case.county in all_potential_venue_options:
        separate_maintenance_case_index = i
        there_is_venue_controlling_separate_maintenance_case = True
  
  check_for_separate_maintenance_cases = True
### note this assumes there's only one such case, as does LHI version
---
# --------------------------------------------------------------------
## marriage information
# --------------------------------------------------------------------
---
id: marriage.date
question: |
  When were you married?
fields:
  - label: Please enter the date you were married
    field: marriage.date
    datatype: ThreePartsDate
validation code: |
      if marriage.date > today():
        validation_error("The marriage date cannot be in the future.", field="marriage.date")
---
id: marriage.address
question: |
  Where were you married?
fields:
  - label: Country or Territory
    field: marriage.address.country
    code: |
      countries_list()
    default: US
  - label: State or territory
    field: marriage.address.state
    code: |
      states_list()
    default: MI
    show if:
      variable: marriage.address.country
      is: US
  - label: County
    field: marriage.address.county
    show if:
      variable: marriage.address.state
      is: MI
    required: False
    code: court_list._load_courts()["address_county"].unique()
  - label: County
    field: marriage.address.county
    js show if: |
      val("marriage.address.country") === "US" && val("marriage.address.state") !== "MI"
    required: False
  - label: City, village, or township
    field: marriage.address.city
---
id: marriage.living_together_yn
question: |
  Living together
fields:
  - label: Are you and your spouse currently living together?
    field: marriage.living_together_yn
    datatype: yesnoradio
  - label: On or about what date did you and your spouse stop living together?
    field: marriage.living_together_stopped_date
    datatype: ThreePartsDate
    show if:
      variable: marriage.living_together_yn
      is: False
  - How many minor children lived in your household on the date you separated?: marriage.number_children_in_home_when_separated
    datatype: integer
    min: 0
    js show if: |
      val("marriage.living_together_yn") === false && ${ "true" if there_are_marital_children else "false"}
---
id: marriage.cobra_coverage
question: |
  Health coverage
subquestion: |
  **COBRA**: After your divorce is final, one spouse may continue getting coverage under the other spouse's insurance through COBRA. Your Judgment of Divorce will include language about this. Typically, the spouse who gets continuing medical insurance through COBRA must pay for it. Insurance through COBRA may cost more than when that person was covered as a spouse. If the parties agree to something else, like having the other spouse pay for the COBRA coverage, that must be specifically added to the Judgment of Divorce. You can add this in the Other Provisions section. The Other Provisions section will be available at the end of this tool.
continue button field: marriage.cobra_coverage
# --------------------------------------------------------------------
## marriage.personal_property_
# --------------------------------------------------------------------
---
id: marital property explanation
question: Dividing Property
subquestion : |
  In a divorce, **marital property** must be divided fairly. Marital property can include both {real property} and {personal property}. In general, something is marital property if:

  * You got it during the marriage, or 
  * Your spouse got it during the marriage, or
  * Both of you got it during the marriage.   
  
  ${ collapse_template(other_marital_property_info) }

  Usually **separate property** (property that belongs to only one spouse) does not get divided in a divorce. But sometimes it is possible to divide it.

  ${ collapse_template(separate_property_more_info) }

  ${ collapse_template(separate_property_treated_marital) }
continue button field: marriage.marital_property_info
---
template: other_marital_property_info
subject: |
  What else can be marital property?
content: |
  Marital property also includes:
  
  * An increase in the value of marital property
  * An increase in the value of separate property during the marriage, but **only if** one of the spouses caused the increase through **active efforts**. A passive increase in value doesn't count.
---
template: separate_property_more_info
subject: |
  More info on separate property
content: |
  Separate property includes both {real property} and {personal property} that is:
  
  * Property owned before the marriage
  * A gift to one party during the marriage
  * Property that one party inherits during the marriage
  * A passive increase in the value of separate property.
  
  **Usually the owner of the separate property keeps it.** But, in special circumstances, a judge might divide separate property. If you want the judge to award you some of your spouse's separate property, you have to prove either:
  
  * The division of marital property is not enough to provide suitable support for you and the children, if any, or
  * You helped to get the separate property or to increase its value.
  
  This can be hard to prove. If you want to ask the judge to divide separate property, consider talking to a lawyer. ${ MLH_GUIDE_FULL }
---
template: separate_property_treated_marital
subject: |
  What about property that belonged to just one spouse but was treated like marital property?
content: |
  Sometimes a judge will divide property that used to be **separate property but was treated like marital property during the marriage.** This can happen when separate property was used for joint purposes, placed in both names, or separate funds were mixed together with marital funds in the same account. 
  
  If you want to ask the judge to divide this kind of property, **consider talking to a lawyer.** ${ MLH_GUIDE_FULL }
---
id: marriage.personal_property_info
question: |
  Personal property
subquestion: |
  You are now going to be asked about your personal property. Personal property means all of the things you own other than real property (real property is real estate such as a house, condo, or land). Personal property includes things like a mobile home, furniture, jewelry, household goods, and collectibles, as well as cash, stocks, and Certificates of Deposit (CDs). Do not include vehicles (such as cars, boats, trailers, motorcycles, or snowmobiles) in this section. You will be asked about vehicles in the next section of this tool.

  - If you and your spouse agree about how all of your property and debt should be divided, use those terms throughout this part of the tool.
  - If you and your spouse don't agree about how your property and debt should be divided, complete this part of the tool using the division of property and debt terms that you want the judge to order.
  - If you and your spouse agree on how to divide some, but not all, of your property and debt, use the terms you do agree on, along with the terms that you want the judge to order for things you don't agree on.

  Normally the party who is awarded specific property, such as a car or home, is responsible for paying the debt related to that property. If you or your spouse need to sign any documents to transfer property, such as car title transfers or quitclaim deeds, your Judgment of Divorce will require you to do this within 30 days of when the judgment is final.
continue button field: marriage.personal_property_info
---
id: marriage.personal_property
question: |
  Personal property
fields:
  - label: Did you and your spouse acquire personal property during the marriage?
    field: marriage.personal_property_acquired
    datatype: yesnoradio
  - label: Have you and your spouse reached an agreement about how all personal property will be divided?
    field: marriage.personal_property_division_agreement
    datatype: yesnoradio
    show if: marriage.personal_property_acquired
  - label: Have you and your spouse **actually divided** all the personal property based on your agreement?
    field: marriage.personal_property_division_actual
    datatype: yesnoradio
    show if: marriage.personal_property_division_agreement
  - note: |
      _Only answer **Yes** if each of you has in your possession all of the items that you have agreed you will have._
    show if: marriage.personal_property_division_agreement
validation code: |
  if marriage.personal_property_acquired and (not marriage.personal_property_division_agreement or not marriage.personal_property_division_actual):
    marriage.personal_property_need_items = True
  else:
    marriage.personal_property_need_items = False
    marriage.accounts.clear()
    marriage.other_pp.clear()
    marriage.mobile_home.clear()
---
# --------------------------------------------------------------------
## marriage.accounts
# --------------------------------------------------------------------
---
objects:
  - marriage.accounts: ALAssetList.using(
      question_text="Bank Accounts (Cash) and Investments",
      noun_sl="account or investment",
      noun_pl="accounts or investments",
      complete_attribute="complete",
      )
---
code: |
  marriage.accounts[i].kind
  marriage.accounts[i].source
  marriage.accounts[i].balance
  marriage.accounts[i].owner
  marriage.accounts[i].complete = True
---
table: marriage.accounts.table
rows: marriage.accounts
columns:
  - Type: row_item.kind
  - Location: row_item.source
  - Amount: currency(row_item.balance)
  - Award: row_item.owner
edit:
  - kind
  - source
  - balance
  - owner
delete buttons: True
confirm: True
---
id: marriage.accounts[i]
question: |
  ${marriage.accounts.question_text}
subquestion: |
  ${marriage.accounts.question_text_table_template}

  Do **NOT** include account numbers.

  ${collapse_template(stocks_mutual_funds_info)}
fields:
  - label: Type
    field: marriage.accounts[i].kind
    choices:
      - Savings Account
      - Checking Account
      - CD Account
      - Money Market Account
      - Brokerage Account
      - Cash
      - Other Investment
  - label: "Describe the other investment:"
    field: marriage.accounts[i].describe_other
    maxlength: 30
    show if:
      variable: marriage.accounts[i].kind
      is: "Other Investment"
  - label: Location (e.g., Fifth Third Bank)
    field: marriage.accounts[i].source
  - note: |
      **Note:** Investment value can be complicated. You may need a financial advisor or other professional to determine an accurate value.
    show if:
      variable: marriage.accounts[i].kind
      is: "Other Investment"
  - label: Amount
    field: marriage.accounts[i].balance
    datatype: currency
    min: 0
    js show if: |
      val("marriage.accounts[i].kind") !== "Other Investment"
  - label: Value
    field: marriage.accounts[i].balance
    datatype: currency
    min: 0
    js show if: |
      val("marriage.accounts[i].kind") === "Other Investment"
  - label: Award to
    field: marriage.accounts[i].owner
    datatype: object_radio
    choices:
      - users[0]
      - other_parties[0]
      - joint
---
template: marriage.accounts.there_is_another_template
content: |
  Please list each bank account and investment that has not been {divided}, and select how it should be awarded.
---
template: stocks_mutual_funds_info
subject: |
  What about stocks, bonds, or mutual funds?
content: |
  Some people buy and manage investments like stock, bonds, or mutual funds using an investment account called a **Brokerage Account.** You can list a brokerage account below.
  
  Choose **Other Investment** if you own specific stock, bonds, or mutual funds **directly,** or if you wish to list specific investments separately. *Example:* if you bought savings bonds directly from the US government, choose "Other Investment."

  **Warning:** Do **not** include investments located in retirement accounts. If you need to divide retirement accounts, you may want to contact a lawyer.          
---
# --------------------------------------------------------------------
## marriage.other_pp
# --------------------------------------------------------------------
---
objects:
  - marriage.other_pp: ALAssetList.using(
      question_text="Other Personal Property",
      noun_sl="piece of property",
      noun_pl="pieces of property",
      complete_attribute="complete",
      )
---
code: |
  marriage.other_pp[i].kind
  marriage.other_pp[i].desc
  marriage.other_pp[i].owner
  marriage.other_pp[i].complete = True
---
table: marriage.other_pp.table
rows: marriage.other_pp
columns:
  - Type: row_item.kind
  - Owed: row_item.desc
  - Responsible: row_item.owner
edit:
  - kind
  - desc
  - owner
delete buttons: True
confirm: True
---
id: marriage.other_pp[i]
question: |
  ${marriage.other_pp.question_text}
subquestion: |
  ${marriage.other_pp.question_text_table_template}

  Select the type of property. Describe the item and select who it should be awarded to.
fields:
  - label: Type of property
    field: marriage.other_pp[i].kind
    choices:
      - Furniture/Furnishings
      - Art Work
      - Antiques
      - Coin and Other Collections
      - Household Items
      - Other Personal Property
  - label: Describe the item
    field: marriage.other_pp[i].desc
  - label: Award to
    field: marriage.other_pp[i].owner
    datatype: object_radio
    choices:
      - users[0]
      - other_parties[0]
---
id: marriage.other_pp.there_are_any
subquestion: |
  ${marriage.other_pp.there_are_any_template}
question: |
  ${marriage.other_pp.question_text}
fields:
  - label: Do you have any ${marriage.other_pp.noun_pl} that have **not** already been {divided}?
    field: marriage.other_pp.there_are_any
    datatype: yesnoradio
---
template: marriage.other_pp.there_are_any_template
content: |
  Examples include furniture, household items, or artwork.
---
template: marriage.other_pp.there_is_another_template
content: |
  Please list each other item of personal property that has not been {divided} and indicate whether you or your spouse will keep it.
---
# --------------------------------------------------------------------
## marriage.mobile_home
# --------------------------------------------------------------------
---
objects:
  - marriage.mobile_home: ALAssetList.using(
      question_text="Mobile homes",
      noun_sl="mobile home",
      noun_pl="mobile homes",
      complete_attribute="complete",
      )
---
code: |
  marriage.mobile_home[i].kind
  marriage.mobile_home[i].desc
  marriage.mobile_home[i].owner
  marriage.mobile_home[i].complete = True
---
table: marriage.mobile_home.table
rows: marriage.mobile_home
columns:
  - VIN: row_item.kind
  - Location: row_item.desc
  - Award: row_item.owner
edit:
  - kind
  - desc
  - owner
delete buttons: True
confirm: True
---
id: marriage.mobile_home
question: |
  ${marriage.mobile_home.question_text}
subquestion: |
  ${marriage.mobile_home.question_text_table_template}
fields:
  - label: VIN
    field: marriage.mobile_home[i].kind
  - label: Location
    field: marriage.mobile_home[i].desc
  - label: Award to
    field: marriage.mobile_home[i].owner
    datatype: object_radio
    choices:
      - users[0]
      - other_parties[0]
---
template: marriage.mobile_home.there_is_another_template
content: |
  Please list each mobile home that has not been {divided}.
---
# --------------------------------------------------------------------
## marriage.debts
# --------------------------------------------------------------------
---
objects:
  - marriage.debts: ALAssetList.using(
      question_text="Debts",
      noun_sl="debt",
      noun_pl="debts",
      minimum_number=1,
      complete_attribute="complete",
      )
---
# this list's there_are_any is determined by interview_order
# re-sets True after review_full recomputes x.gathered_reset
code: |
  marriage.debts.there_are_any = True
---
code: |
  marriage.debts[i].kind
  marriage.debts[i].source
  marriage.debts[i].balance
  marriage.debts[i].owner
  marriage.debts[i].complete = True
---
table: marriage.debts.table
rows: marriage.debts
columns:
  - Type: row_item.kind
  - Owed: row_item.source
  - Balance: currency(row_item.balance)
  - Responsible: row_item.owner
edit:
  - kind
  - source
  - balance
  - owner
delete buttons: True
confirm: True
---
id: marriage.debts.info
question: |
  ${marriage.debts.question_text}
subquestion: |
  The judge assigned to your divorce case will not have any authority over your creditors (those whom you owe money). Your Judgment of Divorce may divide your marital debt, assigning you or your spouse responsibility for paying each debt. However, creditors may continue to treat debts in both of your names as joint debt. 
  
  If your spouse defaults on a debt that the Judgment of Divorce requires them to pay, you can return to the family court to seek repayment from them. For that reason, it's **important for all debts that are in both of your names to be included** in your Judgment of Divorce.
  
continue button field: marriage.debts.info
---
id: marriage.debts.any
question: |
  ${marriage.debts.question_text}
fields:
  - label: Do you or your spouse have any debts, either in your own names or together?
    field: marriage.debts.any
    datatype: yesnoradio
---
id: marriage.debts.pay_debts_in_own_names
question: |
  ${marriage.debts.question_text}
fields:
  - label: Do you and your spouse each plan to pay the debts in **your own names?**
    field: marriage.debts.pay_debts_in_own_names
    datatype: yesnoradio
  - label: Do you and your spouse agree on who will be responsible for these debts?
    field: marriage.debts.agree_responsibility_debts_own_name
    datatype: yesnoradio
    show if:
      variable: marriage.debts.pay_debts_in_own_names
      is: False
---
id: marriage.debts.any_in_both_names
question: |
  ${marriage.debts.question_text}
fields:
  - label: Do you and your spouse have any debts that are in **both** of your names?
    field: marriage.debts.any_in_both_names
    datatype: yesnoradio
  - label: Do you and your spouse agree on who will be responsible for these debts?
    field: marriage.debts.agree_responsibility_debts_both_names
    datatype: yesnoradio
    show if:
      variable: marriage.debts.any_in_both_names
      is: True
---
id: marriage.debts[i]
question: |
  ${marriage.debts.question_text}
subquestion: |
  ${marriage.debts.there_is_another_template}

  ${marriage.debts.question_text_table_template}

  Do **NOT** include credit card numbers or any other identifying number associated with a debt.
fields:
  - label: Type of debt
    field: marriage.debts[i].kind
    choices:
      - Credit card
      - Personal loan
      - Student loan
      - Other loan
      - Unpaid taxes
      - Judgment
  - label: To whom do you owe the money
    field: marriage.debts[i].source
  - label: Approximate balance
    field: marriage.debts[i].balance
    datatype: currency
    min: 0
  - label: Responsibility of
    field: marriage.debts[i].owner
    datatype: object_radio
    choices:
      - users[0]
      - other_parties[0]
      - joint
---
template: marriage.debts.there_is_another_template
content: |
  % if marriage.debts.any:
    % if not marriage.debts.pay_debts_in_own_names:
    List each debt that is currently in one spouse's name, but that the other spouse **${"will" if marriage.debts.agree_responsibility_debts_own_name else "should"}** be responsible for.
    % endif

    % if marriage.debts.any_in_both_names:
    ${"Also, list" if not marriage.debts.pay_debts_in_own_names else "List"} each jointly held debt (debts in both of your names) that will be divided and indicate whether you or your spouse **${"will" if marriage.debts.agree_responsibility_debts_both_names else "should"}** be responsible for it.
    % endif
  % endif
---
# --------------------------------------------------------------------
## marriage.vehicles
# --------------------------------------------------------------------
---
objects:
  - marriage.vehicles: ALAssetList.using(
      question_text="Vehicles",
      noun_sl="vehicle",
      noun_pl="vehicles",
      minimum_number=1,
      complete_attribute="complete",
      )
---
# this list's there_are_any is determined by interview_order
# re-sets True after review_full recomputes x.gathered_reset
code: |
  marriage.vehicles.there_are_any = True
---
code: |
  if marriage.vehicles.number() >= 12: 
    marriage.vehicles.there_is_another = False
---
code: |
  marriage.vehicles[i].year
  marriage.vehicles[i].make
  marriage.vehicles[i].model
  marriage.vehicles[i].vin
  marriage.vehicles[i].agree
  marriage.vehicles[i].debt
  marriage.vehicles[i].owner
  marriage.vehicles[i].complete = True
---
table: marriage.vehicles.table
rows: marriage.vehicles
columns:
  - Year/Make/Model: |
      " ".join((row_item.year, row_item.make, row_item.model))
  - Award: row_item.owner
edit:
  - year
  - make
  - model
  - vin
  - agree
  - debt
  - owner
delete buttons: True
confirm: True
---
id: marriage.vehicles.info
question: |
  ${marriage.vehicles.question_text}
subquestion: |
  Next you will be asked about vehicles. Vehicles include cars, boats, trailers, motorcycles, snowmobiles, and other motorized equipment titled to the owner. Please do not include mobile homes here &mdash; to add a mobile home tap the **Review / Edit** link or use the ${MLH_back_button_label} button.

  You will be asked for the Make and Model of each vehicle you own. Make refers to the name of the company that manufactured the vehicle. Examples of vehicle "makes" are Ford, General Motors, Chrysler, and Toyota. Model refers to the type of vehicle. Examples of "models" are Focus, Cutlass, Town and Country, and Highlander. 
  
  If you are describing a vehicle other than a car, do your best to identify the vehicle using the Make and Model entries. For example, if you are listing a boat, you might say "Starcraft" for Make and "Starfish 226" for Model.
continue button field: marriage.vehicles.info
---
id: marriage.vehicles.any
question: |
  ${marriage.vehicles.question_text}
fields:
  - label: Do you and your spouse own any vehicles (car, boat, trailer, motorcycle, snowmobile, etc.)?
    field: marriage.vehicles.any
    datatype: yesnoradio
  - label: How do you want to divide your vehicles?
    field: marriage.vehicles.keep_own
    input type: radio
    choices:
      - label: Each party will keep the vehicle(s) now in his or her possession and titled in **only** his or her name. The party keeping the vehicle(s) is fully responsible to pay any debt related to the vehicle(s). The other party will have no claim to any vehicle(s) in the other's name and possession.
        value: True
      - label: We need to transfer title to one or more vehicles.
        value: False
    show if: marriage.vehicles.any
validation code: |
  if marriage.vehicles.any and not marriage.vehicles.keep_own:
    marriage.vehicles.need_items = True
  else:
    marriage.vehicles.need_items = False
    marriage.vehicles.clear()
---
id: marriage.vehicles[i]
question: |
  ${marriage.vehicles.question_text}
subquestion: |
  ${marriage.vehicles.there_is_another_template}

  ${marriage.vehicles.question_text_table_template}
fields:
  - label: Year
    label above field: False
    field: marriage.vehicles[i].year
    minlength: 4
    maxlength: 4
  - label: |
      {vehicles_make|Make}
    label above field: False
    field: marriage.vehicles[i].make
  - label: |
      {vehicles_model|Model}
    label above field: False
    field: marriage.vehicles[i].model
  - label: VIN
    label above field: False
    field: marriage.vehicles[i].vin
  - label: Award this vehicle to
    field: marriage.vehicles[i].owner
    datatype: object_radio
    choices:
      - users[0]
      - other_parties[0]
  - label: Do you and your spouse agree on what should happen with this vehicle?
    field: marriage.vehicles[i].agree
    datatype: yesnoradio
  - label: Is there a debt related to this vehicle?
    field: marriage.vehicles[i].debt
    datatype: yesnoradio
  - note: |
      **The person who is awarded the vehicle will be responsible for paying the debt on that vehicle.**
    show if: marriage.vehicles[i].debt
---
template: marriage.vehicles.there_is_another_template
content: |
  Please list each vehicle and whether you or your spouse will keep it.
---
# --------------------------------------------------------------------
## marriage.real_property
# --------------------------------------------------------------------
---
objects:
  - marriage.real_property: ALAssetList.using(
      question_text="Real property",
      noun_sl="property",
      noun_pl="properties",
      complete_attribute="complete",
      )
---
code: |
  if marriage.real_property == 10: 
    marriage.real_property.there_is_another = False
---
code: |
  marriage.real_property[i].initializeAttribute("address", ALAddress)
  if i == 0:
    marriage.real_property[i].warning
  marriage.real_property[i].address.address
  marriage.real_property[i].desc
  marriage.real_property[i].parcel_number
  marriage.real_property[i].agree
  marriage.real_property[i].owner
  marriage.real_property[i].complete = True
---
table: marriage.real_property.table
rows: marriage.real_property
columns:
  - Address: row_item.address.on_one_line()
  - Description: row_item.desc
  - Award: |
      row_item.owner if row_item.owner in [users[0], other_parties[0]] else "Sell and split value and debt"
edit:
  - address.address
  - desc
  - parcel_number
  - agree
  - owner
delete buttons: True
confirm: True
---
id: marriage.real_property.there_are_any
question: |
  ${marriage.real_property.question_text}
subquestion: |
  Real property is real estate such as a house, a condo, or land.
fields:
  - label: Do you or your spouse own real property that was bought or paid for while you were married?
    field: marriage.real_property.there_are_any
    datatype: yesnoradio
---
id: marriage.real_property[i].warning
continue button field: marriage.real_property[i].warning
question: Important information about real property and divorce
subquestion: |
  If you use this tool:
  
  * The person who is awarded a piece of real property (home, condo, or land) will also be made responsible for paying the mortgage, insurance, taxes, liens, and any other costs on the property. 
  * Or if you and the other party are going to sell the property and share equally in the profit or loss from the sale, both of you will be responsible for the mortgage, insurance, taxes, liens, and any other costs on the property until it is sold. 

  These are common ways of assigning the rights and responsibilities of real property in a divorceâ€”but not the only ways. If you don't agree with any of these terms for dividing the real property and the related debt, you should talk to a lawyer before finalizing your divorce. You may want to talk to a lawyer anyway to ensure the best possible outcome. ${ MLH_GUIDE_FULL }
  
  Please review the articles [Divorce Basics: Dividing Your Property and Debt](https://michiganlegalhelp.org/resources/family/divorce-basics-dividing-your-property-and-debt) and [Real Estate and Divorce](https://michiganlegalhelp.org/resources/family/real-estate-and-divorce) for more information.

  As part of the Judgment of Divorce, the person who is awarded the property may be ordered to refinance the home in his or her name alone. However, refinancing might not be possible if the property is worth less than the amount of the mortgage, if the person required to refinance has poor credit, or for other reasons.

  The person who is not awarded the property may be required to complete a quitclaim deed giving the other spouse their share of the property.

---
id: marriage.real_property
sets:
  - marriage.real_property[i].address.address
  - marriage.real_property[i].address.unit
  - marriage.real_property[i].address.city
  - marriage.real_property[i].address.state
  - marriage.real_property[i].address.zip
question: |
  What is the address of the ${ordinal(i)} property?
subquestion: |
  ${marriage.real_property.question_text_table_template}
fields:
  - code: |
      marriage.real_property[i].address.address_fields(country_code=users[0].address.attr("country"), default_state=users[0].address.attr("state"), show_country=users[0].address.attr("country") != "US")
---
id: marriage.real_property
question: |
  Describe the ${ordinal(i)} property
subquestion: |
  Address: ${marriage.real_property[i].address.on_one_line()}
fields:
  - label: Legal description
    required: False
    field: marriage.real_property[i].desc
    input type: area
    rows: 10
  - label: Parcel number
    required: False
    field: marriage.real_property[i].parcel_number
---
id: marriage.real_property
question: |
  What should happen with the ${ordinal(i)} property?
subquestion: |
  Address: ${marriage.real_property[i].address.on_one_line()}
fields:
  - label: Do you and your spouse agree on what should happen with this property?
    field: marriage.real_property[i].agree
    datatype: yesnoradio

  - label: "What should happen with the property?"
    field: marriage.real_property[i].owner
    datatype: object_radio
    object labeler: |
      lambda y: y.real_property_question_label
    choices:
      - users[0]
      - other_parties[0]
      - sell_and_share

  - label: Is this property titled in both of your names?
    field: marriage.real_property[i].titled_together
    datatype: yesnoradio
    js show if: |
      val("marriage.real_property[i].owner") === "users[0]" || val("marriage.real_property[i].owner") === "other_parties[0]"

  - note: |
      **The person who is not keeping the property will need to sign a quitclaim deed giving his or her share of the property to the other person.**
    js show if: |
      val("marriage.real_property[i].titled_together") === true

  - label: Is the person getting the property the one whose name is on the title?
    field: marriage.real_property[i].title_award_to_named
    datatype: yesnoradio
    js show if: |
      val("marriage.real_property[i].titled_together") === false

  - note: |
      **The person who is not keeping the property will need to sign a quitclaim deed giving his or her share of the property to the other person.**
    js show if: |
      val("marriage.real_property[i].title_award_to_named") === false

  - label: Is there a mortgage or other loan on this property?
    field: marriage.real_property[i].mortgage_or_loan
    datatype: yesnoradio
    js show if: |
      val("marriage.real_property[i].titled_together") !== null

  - label: Is the mortgage or other loan in both of your names?
    field: marriage.real_property[i].mortgage_or_loan_together
    datatype: yesnoradio
    js show if: |
      val("marriage.real_property[i].mortgage_or_loan") === true

  - label: Is the person getting the property the one whose name is on the loan?
    field: marriage.real_property[i].mortgage_or_loan_award_to_named
    datatype: yesnoradio
    js show if: |
      val("marriage.real_property[i].mortgage_or_loan_together") === false

  - note: |
      **The person who is keeping the property will be required to refinance the loan so that it is in his or her name alone.**
    js show if: |
      val("marriage.real_property[i].mortgage_or_loan_together") === true || val("marriage.real_property[i].mortgage_or_loan_award_to_named") === false

  - note: |
      The Real Estate Addendum of your proposed Judgment of Divorce will say that:
      
      * the property is awarded to both you and the Defendant, 
      * the property will be sold within a reasonable time after the judgment is entered, and
      * both of you are responsible for the mortgage, insurance, taxes, liens, and any other costs and debts associated with the property. 
      
      **If you want something different, use the ${ MLH_GUIDE } to look for a lawyer or legal services near you.**
    js show if: |
      val("marriage.real_property[i].owner") === "sell_and_share"

---
template: marriage.real_property.there_is_another_template
content: ""
---
# --------------------------------------------------------------------
## marriage.other_provisions
# --------------------------------------------------------------------
---
id: marriage.other_provisions
question: |
  Other provisions
fields:
  - label: Are there any other terms that you and your spouse have agreed to that you want to include in your Judgment of Divorce?
    field: marriage.other_provisions_any
    datatype: yesnoradio
  - label: Enter the additional agreements
    field: marriage.other_provisions
    input type: area
    rows: 10
    show if: marriage.other_provisions_any
validation code: |
  if not marriage.other_provisions_any:
    marriage.invalidate_attr("other_provisions")
---
# --------------------------------------------------------------------
## marriage.temporary_order
# --------------------------------------------------------------------
---
if: tool_ID == "JOD_only"
id: marriage.temporary_order jod_only
question: |
  Temporary order
fields:
  - label: Has a temporary order been entered in your case for custody, parenting time, child support, or spousal support?
    field: marriage.temporary_order
    datatype: yesnoradio
  - note: |
      If a temporary order was entered previously, you should have already filed a [Domestic Relations Judgment Information form](https://www.courts.michigan.gov/siteassets/forms/scao-approved/foc100.pdf). This tool will produce a second Domestic Relations Judgment Information form, which you will need to file with your Judgment of Divorce.

      ${collapse_template(marriage.temporary_order_changed_template)}
    show if: marriage.temporary_order
  - label: Has any of the information that goes on this form changed since the last time it was filed?
    field: marriage.temporary_order_changed
    datatype: yesnoradio
    show if: marriage.temporary_order
---
if: tool_ID == "divorce_complaint"
id: marriage.temporary_order divorce complaint
question: |
  Updating your forms?
fields:
  - label: What stage of the divorce process are you in?
    field: returning_to_finalize
    datatype: radio
    choices:
      - I'm **getting ready to file** for divorce.: False
      - The divorce was **already filed.** I'm back to update my forms.: True
    # idea: maybe we could include this question on download page with a note specifically telling people to edit this on review screen?
  - label: Has a temporary order been entered in your case for custody, parenting time, child support, or spousal support?
    field: marriage.temporary_order
    datatype: yesnoradio
    show if: returning_to_finalize
  - note: |
      If a temporary order was entered previously, you should have already filed a [Domestic Relations Judgment Information form](https://www.courts.michigan.gov/siteassets/forms/scao-approved/foc100.pdf). This tool will produce a second Domestic Relations Judgment Information form, which you will need to file with your Judgment of Divorce.

      ${collapse_template(marriage.temporary_order_changed_template)}
    show if: marriage.temporary_order
  - label: Has any of the information that goes on this form changed since the last time it was filed?
    field: marriage.temporary_order_changed
    datatype: yesnoradio
    show if: marriage.temporary_order
  - note: |
      **Important:** Make sure to use the **Review / Edit** screen to update this information on your forms.
    show if: marriage.temporary_order_changed 
---
template: marriage.temporary_order_changed_template
subject: |
  What information is on the Domestic Relations Judgment Information form?
content: |
  The Domestic Relations Judgment Information form contains the following information:

  INFORMATION ABOUT YOU

    - Full name and address
    - Social Security Number
    - Telephone number
    - E-mail address
    - Employer name, address, phone, and FEIN
    - Driver's license number and state
    - Occupational license number(s), type(s), issuing state(s), and date(s)

  INFORMATION ABOUT THE OTHER PARTY

    - All of the above information

  INFORMATION ABOUT CHILDREN

    - Full name
    - Social Security Number
    - Date of birth
    - Who has physical custody
    - Current primary residence address
    - Who has legal custody

  INFORMATION ABOUT MEDICAL INSURANCE HELD BY EITHER PARTY

    - Provider name and address
    - Policy / group number
    - Cert. number
    - Children covered by the policy
    - Policy coverage (medical/dental/vision/other)
---
# --------------------------------------------------------------------
## marriage.true_statement
# --------------------------------------------------------------------
---
id: marriage.true_statement
question: |
  Everything is true?
fields:
  - label: Is all of the information you provided in this tool true to the best of your knowledge, information, and belief?
    field: marriage.true_statement
    datatype: yesnoradio
  - note: |
      **You must provide truthful and accurate information on your divorce forms.** Before filing, you will be required to verify with your signature that the information contained in the forms is true to the best of your knowledge, information, and belief. 
      
      If you do not believe the information you have provided is truthful and accurate, please go back and make the necessary changes.
    show if:
      variable: marriage.true_statement
      is: False
---
# ====================================================================
## interview order sub-part blocks
# ====================================================================
# note: these were originally created by Jack and housed in main_judgment_of_divorce.yml
# trying out sharing them, because I believe they will apply to several interviews, but it's possible we'll eventually decide we want them to be separate for each interview
---
code: |
  if confidential_contact_info_yn:
    users[0].address.address
    if tool_ID == "divorce_complaint":
      if users[0].lives_in_Michigan and users[0].has_lived_6_months_MI:
        users[0].ten_days_in_county
  
  else:
    users[0].address.address
    if tool_ID == "divorce_complaint":
      if users[0].lives_in_Michigan and users[0].has_lived_6_months_MI:
        users[0].ten_days_in_county
    users[0].village_or_township_yn
    users[0].address.county # skipped if answered on lives_in_Michigan screen
    if users[0].mailing_address.yesno:
      users[0].mailing_address.address
  
  users[0].no_phone_number
  users[0].email
  
  interview_order_user_contact_info = True
#LHI asks for township in divorce complaint even if not MI address. JOD seems to depend on whether they have MI address. But I see no reason this would be different for complaint vs. JOD_only. So collecting here for both no matter what. I think this only goes on Record of Divorce.
---
code: |
  other_parties[0].address.address
  if tool_ID == "divorce_complaint":
    if other_parties[0].lives_in_Michigan and other_parties[0].has_lived_6_months_MI:
      other_parties[0].ten_days_in_county

  interview_order_other_parties_address_info = True
---
code: |
  if other_parties[0].has_attorney:
    other_parties[0].attorney.name.first
    other_parties[0].attorney.address.address
    other_parties[0].attorney.phone_number
  interview_order_other_parties_attorney = True
---
code: |
  marriage.accounts
  marriage.other_pp
  marriage.mobile_home
  marriage.personal_property_info
  if marriage.personal_property_need_items:
    marriage.accounts.gather()
    marriage.other_pp.gather()
    marriage.mobile_home.gather()
  else:
    marriage.accounts.there_are_any = False
    marriage.accounts.gathered = True
    marriage.accounts.revisit = True

    marriage.other_pp.there_are_any = False
    marriage.other_pp.gathered = True
    marriage.other_pp.revisit = True

    marriage.mobile_home.there_are_any = False
    marriage.mobile_home.gathered = True
    marriage.mobile_home.revisit = True

  interview_order_personal_property = True
---
code: |
  marriage.debts.info
  if marriage.debts.need_items:
    marriage.debts.gather()
  else:
    marriage.debts.there_are_any = False
    marriage.debts.gathered = True
    marriage.debts.revisit = True
  interview_order_debts = True
---
code: |
  if marriage.debts.any and (not marriage.debts.pay_debts_in_own_names or marriage.debts.any_in_both_names):
    marriage.debts.need_items = True
  else:
    marriage.debts.need_items = False
    marriage.debts.clear()
---
code: |
  marriage.vehicles.info
  if marriage.vehicles.need_items:
    marriage.vehicles.gather()
  else:
    marriage.vehicles.there_are_any = False
    marriage.vehicles.gathered = True
    marriage.vehicles.revisit = True
  interview_order_vehicles = True
---