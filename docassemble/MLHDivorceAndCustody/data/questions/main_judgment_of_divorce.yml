---
include:
  - divorce_custody_setup.yml
---
# TODO subtitle? & confirm description
metadata:
  title: Michigan Judgment of Divorce
  short title: Michigan Judgment of Divorce
  description: |
    Self-help interview to obtain a Judgment of Divorce and other documents needed to finish a divorce in Michigan.
  tags:
    - Family
  authors:
    - Michigan Legal Help
    - Lemma Legal
---
sections:
  - signpost_intro: "Introduction"
  - signpost_qualify: "Is this tool right for you?"
  - signpost_user: "Your Information"
  - signpost_spouse: "Spouse's Information"
  - signpost_support: "Spousal Support"
  - signpost_children: "Children"
  - signpost_income_etc: "Income, Insurance, etc."
  - signpost_property: "Property and Debt"
  - signpost_last_section: "Final Questions"
  - signpost_done: "Get Your Forms"
  - review_full: "âœŽ <u>Review / Edit</u>"
---
# TODO need survey url
code: |
  survey_link_url_only = "https://www.surveymonkey.com/r/xxxxxx"
---
code: |
  tool_ID = "JOD_only"
---
# TODO need survey script
template: survey_embed_script
content: |
  <script>
  </script>
---
# set intro landing screen variables
code: |
  MLH_form_type = "forms"
  MLH_time_min = 15
  MLH_time_max = 45

  # TODO need resource url & confirm page name
  resource_page_url_only = "https://michiganlegalhelp.org/node/xxxx"
  resource_page_name = "Judgment of Divorce"

  # for JOD_only, there are no specific instructions
  MLH_instructions_included = False
---
# it seems like there's nothing to sign unless there was previously a temp order
code: |
  if marriage.temporary_order:
    MLH_esign_supported = True
  else:
    MLH_esign_supported = False
depends on:
  - marriage.temporary_order
---
template: MLH_welcome_message
content: |
 Welcome to the Do-It-Yourself Judgment of Divorce tool. 

 A Judgment of Divorce is the **final order** you need for the end of a divorce case. Use this tool if:
  
   * you already have an active divorce case, and
   * all you need is a Judgment of Divorce and the forms that go with it.
---
id: JOD_only special instructions
question: How to answer the questions in this tool
continue button field: JOD_only_instructions
subquestion: |
  To prepare a Judgment of Divorce **before** the final hearing:
  
  * if you and your spouse **agree** on a question, use your agreed answer;
  * if you and your spouse **don't agree** on a question, give the answer that you want the judge to order. 
  
  To prepare a Judgment of Divorce **after** the final hearing:
  
  * give answers that match what the judge ordered at the final hearing.
---
# ====================================================================
## interview_order
# ====================================================================
---
id: interview_order_michigan_judgment_of_divorce
mandatory: True
scan for variables: False
code: |
  set_persistent_labels
  nav.set_section("review_full")
  nav.set_section("signpost_intro")
  MLH_intro_landing
  JOD_only_instructions
  MLH_agree_terms
  MLH_intro_navigate_save
  if MLH_intro_agree_no_pii == False:
    MLH_intro_agree_no_pii_exit

  nav.set_section("signpost_qualify")
  if not marriage.pending_divorce:
    exit_no_pending_divorce

  county_choice # TODO custom? "In what county was the divorce filed?"
  court_index
  the_court
  the_foc
  docket_number
  user_ask_role
  set_JOD_party_labels

  if not marriage.breakdown:
    exit_no_marriage_breakdown

  if marriage.have_pension_retirement:
    marriage.pension_retirement_accounts_keep_own
    if not marriage.pension_retirement_accounts_continue:
      exit_general

  if marriage.have_financial_instruments:
    if marriage.financial_instruments_held_together:
      marriage.financial_instruments_held_together_agree_about_division
      if not marriage.financial_instruments_held_together_continue:
        exit_general
    else:
      if marriage.financial_instruments_keep_or_divide == "divide":
        exit_general
      elif marriage.financial_instruments_keep_or_divide == "keep":
        if not marriage.financial_instruments_keep_own_continue:
          exit_general

  if marriage.have_business:
    exit_general

  if marriage.have_experienced_domestic_violence:
    if not marriage.have_experienced_domestic_violence_continue:
      exit_general

  nav.set_section("signpost_user")

  users.gather()
  users[0].name.first
  users[0].previous_last_name_yn
  users[0].new_last_name_yn
  users[0].gender
  users[0].marriage_number
  users[0].birthdate
  users[0].birthplace

  interview_order_user_contact_info

  nav.set_section("signpost_spouse")

  other_parties.gather()
  other_parties[0].name.first
  other_parties[0].previous_last_name_yn
  other_parties[0].gender
  other_parties[0].marriage_number
  other_parties[0].birthdate
  other_parties[0].birthplace

  other_parties[0].address.address
  if other_parties[0].address.state == "MI":
    other_parties[0].address.county
    other_parties[0].village_or_township_yn
  if other_parties[0].mailing_address.yesno:
    other_parties[0].mailing_address.address

  other_parties[0].no_phone_number
  other_parties[0].email

  interview_order_other_parties_attorney

  nav.set_section("signpost_support")

  interview_order_spousal_support
  
  nav.set_section("signpost_children")
  interview_order_children
  interview_order_pregnancy

  if there_are_marital_children:
    prior_family_cases.gather()

  nav.set_section("signpost_income_etc")
  
  if not there_are_marital_children:
    marriage.cobra_coverage
  
  if there_are_marital_children:
    users[0].insurance.gather()
    other_parties[0].insurance.gather()
    if users[0].insurance.there_are_any or other_parties[0].insurance.there_are_any:
      marriage.cobra_coverage

  if there_are_marital_children or user_wants_post_divorce_support:
    interview_order_user_employment
    interview_order_user_identifying_info
    users[0].has_alias
    interview_order_other_party_employment
    interview_order_other_party_identifying_info
    other_parties[0].has_alias
  elif spousal_support_provisions == "user_agrees_to_pay_spousal_support":
    if users[0].has_job:
      users[0].job.employer.name.first
    if other_parties[0].has_job:
      other_parties[0].job.employer.name.first

  nav.set_section("signpost_property")

  interview_order_personal_property
  interview_order_vehicles
  interview_order_debts
  marriage.real_property.gather()
  if there_are_marital_children:
    interview_order_income_tax
  
  nav.set_section("signpost_last_section")

  marriage.date
  marriage.address.city
  if not marriage.living_together_yn:
    marriage.living_together_stopped_date

  if marriage.other_provisions_any:
    marriage.other_provisions

  if marriage.temporary_order:
    marriage.temporary_order_changed

  if not marriage.true_statement:
    exit_general

  # load value of these so that they populate forms as expected
  plaintiffs
  defendants

  nav.set_section("signpost_done")
  MLH_standard_outro_pages  
  MLH_download
---
# EKM note: interview_order code blocks moved from here to question_bank.yml
---