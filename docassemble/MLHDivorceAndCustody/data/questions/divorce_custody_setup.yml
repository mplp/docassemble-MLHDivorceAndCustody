---
include:
  - docassemble.AssemblyLine:assembly_line.yml
  - docassemble.ALAnyState:any_state.yml
  - docassemble.mlhframework:mlh_interview_framework.yml
  - review.yml
  - documents.yml
  - question_bank.yml
  - children_spousal_support.yml
---
modules:
  - docassemble.ALToolbox.al_income
  - docassemble.ALToolbox.ThreePartsDate
  - .jod_functions
---
features:
  labels above fields: True
  css: mlh-divorce-and-custody.css
  # note css line copied from Jack's main judgment yml-- Ask Jack -- maybe just a placeholder?
---
# for framework court loader logic
code: |
  filing_court = "circuit_only"
  ottawa_circuit_location = "West Olive"
---
# set FOC information
code: |
  foc_index = next(court_list.filter_courts_by_2([county_choice], ['foc'], column_1='address_county', column_2='type'))[0]
  the_foc = court_list.as_court('the_foc',foc_index)
---
code: |
  if tool_ID in ["JOD_only", "divorce_complaint", "divorce_answer"]:
    OP_label = "your spouse"
    case_label = "divorce"
    if tool_ID == "divorce_complaint":
      filing_name = "Complaint for Divorce"
      user_ask_role = "plaintiff"
      user_party_label = "the Plaintiff"
      OP_party_label = "the Defendant"
    elif tool_ID == "divorce_answer":
      filing_name = "Counterclaim for Divorce"
      user_ask_role = "defendant"
      user_party_label = "the Defendant"
      OP_party_label = "the Plaintiff"
    elif tool_ID == "JOD_only":
      filing_name = "Judgment of Divorce"
  elif tool_ID == "custody_complaint":
    user_ask_role = "plaintiff"
    OP_label = "the Defendant"
    case_label = "custody"
  elif tool_ID == "custody_answer":
    user_ask_role = "defendant"
    OP_label = "the Plaintiff"
    case_label = "custody"

  set_prior_family_case_types

  set_persistent_interview_specific_logic = True
---
# needed for spousal support questions
# set these separately because they can change if user_ask_role is edited
if: tool_ID == "JOD_only"
code: |
  if user_ask_role == "plaintiff":
    user_party_label = "the Plaintiff"
    OP_party_label = "the Defendant"
  elif user_ask_role == "defendant":
    user_party_label = "the Defendant"
    OP_party_label = "the Plaintiff"  
  
  set_JOD_party_labels = True
---
### divorce instructions variables
# note: currently no JOD_only instructions, but using some of this in optional_download_message
code: |
  if there_are_marital_children:
    resource_page_url_only = "https://michiganlegalhelp.org/node/1078"
    resource_page_name = "Filing for Divorce with Children"
    has_whats_next_text = False
  else:
    resource_page_url_only = "https://michiganlegalhelp.org/node/1077"
    resource_page_name = "Filing for Divorce without Children"
    has_whats_next_text = True
    whats_next_text_message = "Text 1400 to (734) 275-2201 to get automated text messages about the next steps in a divorce case."

  undefine("resource_page_link")

  set_dynamic_instructions_variables = True
---
code: |
  if tool_ID in ["divorce_complaint", "JOD_only", "divorce_answer"]:
    cover_sheet_header = "Your divorce forms are ready. Well done!"
  
  if tool_ID == "divorce_complaint":
    cover_sheet_complete_1 = f"Now that you have your { MLH_form_type }, use our instructions to learn about next steps. The following pages have instructions and other helpful information."
  elif tool_ID == "JOD_only":
    if user_ask_role == "plaintiff" or ((marriage.have_pension_retirement and not marriage.pension_retirement_accounts_keep_own) or (marriage.personal_property_need_items and len(marriage.accounts.filter(trigger_investment_reminder=True)) > 0) or (there_are_marital_children and len(children.filter(legal_parent="both").filter(revoke_paternity_reminder=True)) > 0) or (there_are_marital_children and not MI_has_jurisdiction_all_kids)):
      cover_sheet_complete_1 = f"Now that you have your { MLH_form_type }, use our instructions to learn about next steps. Online instructions are linked below, and the following pages have other helpful information."
    else:
      cover_sheet_complete_1 = f"Now that you have your { MLH_form_type }, use our instructions to learn about next steps."
---
code:  |
  github_repo_name = 'docassemble-MLHDivorceAndCustody' if get_config('debug') else 'docassemble-UserFeedback'
---
terms:
  - phrases:
      - assisted reproduction
    definition: |
      Assisted reproduction is a way to become pregnant that is not sexual intercourse. It includes:

      * Donor insemination
      * Sperm or egg donation
      * Embryo donation
      * In vitro fertilization (IVF) and embryo transfer
      * Intracytoplasmic sperm injection
      * Assisted reproductive technology
  - phrases:
      - marital children
    definition: |
      Children who have both you and your spouse as their legal parents.
  - phrases:
      - parenting time
    definition: |
      Sometimes called "visitation".
  - phrases:
      - minor
    definition: |
      A child is a minor if they are 17 years old or younger.
  - investments: |
      Stocks, bonds, Certificates of Deposit (CDs), mutual funds, Money Market Accounts, or other investments, not including pensions or retirement accounts.
  - vehicles_make: |
      Make refers to the name of the company that manufactured the vehicle. Examples of vehicle "makes" are Ford, General Motors, Chrysler, and Toyota.
  - vehicles_model: |
      Model refers to the type of car. Examples of "models" are Focus, Cutlass, Town and Country, and Highlander.
  - spouse: |
      Spouse is another word for "wife", "husband", or "person you're married to".
  - divided: |
      Something has already been divided if:
      
      * you and your spouse **agree** who should have it, and
      * it is **already in the possession** of the agreed person.

      If something has already been divided, you do not need to add it here.
  - stayed: |
      Most cases are not stayed. A stay is a court ruling to stop or pause a court case. A court can lift the stay later and continue the case. Examples: 
      
      * Sometimes when a party files an appeal, a judge may grant a motion for a stay. When this happens, it stops the effect of the lower court order while the appeal is going on. 
      * Sometimes a stay happens without an appeal. For example, a bankruptcy case usually stays the division of marital property in a divorce case.
  - phrases:
      - separate property
      - separate
    definition: |
      Separate property **belongs to only one spouse.** It can include:
      
      * real property (also called real estate, such as houses and land) and 
      * personal property (everything that is not real property).
  - phrases:
      - marital property
      - marital
    definition: |
      Something is marital property if:

      * You got it during the marriage, or 
      * Your spouse got it during the marriage, or
      * Both of you got it together during the marriage.  
      
      This can include both real property (also called real estate, such as houses and land) and personal property (everything that is not real property).
  - phrases:
      - real property
      - real
    definition: |
      Real property is also called real estate, such as houses and land. It can be either marital or separate property.
  - phrases:
      - personal property
      - personal
    definition: |
      Personal property includes everything that is **not** real property. Some examples are bank accounts, books, clothes, furniture, jewelry, cars, and mobile homes. It can be either marital or separate property.
---

