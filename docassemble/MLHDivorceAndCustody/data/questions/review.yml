---
id: review_full
event: review_full
question: |
  Review your answers
review:
  - Edit:
      - marriage.true_statement
    button: |
      ##### Is all the information you provided true?
        - ${word(yesno(marriage.true_statement))}
  - Edit:
      - returning_to_finalize
    button: |
      ##### What stage of the case are you in?
      % if not returning_to_finalize:
       - You said you are **preparing to file** for divorce.
      
      **Important:** if you already filed, please tap **Edit** to update your case status.
      % else:
      
      You said that:

        - You **already filed** your divorce complaint.
      % if marriage.temporary_order:
        - A **temporary order was entered** in your case for custody, parenting time, child support, or spousal support.  
      % if marriage.temporary_order_changed:
        - Some information that goes on the *Domestic Relations Judgment Information* form (FOC 100) **has changed** since it was last filed.
      
      **Important!** Make sure all information below is correct and updated.
      % else:
        - The information that goes on the *Domestic Relations Judgment Information* form (FOC 100) has **not changed** since it was last filed.
      % endif
      % else:
        - There has been **no temporary order** entered in your case for custody, parenting time, child support, or spousal support.

      **Important:** if a temporary order has been entered, please tap **Edit** to update your case status.
      % endif  
      % endif
    show if: tool_ID == "divorce_complaint"
    # This is a special question in the divorce complaint context, because we fully expect for some people the answers will change between their first pass through the tool and when they return. We really want to try to bring it to people's attention.

#
# ---------- case information ----------
#
#  - note: |
#      % if defined("county_choice"):
#      ${ review_accordion_explainer }
#      % else:
#      ${ review_empty_explainer }
#      % endif
#  - raw html: |
#      ${ start_accordion("""<h2 class="h5">Case Information</h2>""") }
#    show if: defined("county_choice")
  - Edit:
      - county_choice
      - court_index
      - recompute:
        - the_court
        - the_foc
    button: |
      ##### County where your case is filed
        - ${county_choice}
      ##### Court
        - ${the_court}
    show if: tool_ID == "JOD_only"
  - Edit: docket_number
    button: |
      ##### Case number
        - ${docket_number}
    show if: tool_ID == "JOD_only"
  - Edit:
      - user_ask_role
      - recompute:
        - plaintiffs
        - defendants
        - set_JOD_party_labels
    button: |
      ##### Are you the Plaintiff or the Defendant in this case?
        - ${user_ask_role.capitalize()}
    show if: tool_ID == "JOD_only"
  - Edit:
      - spouse_is_in_military
    button: |
      ##### Spouse on active US military duty?
        - ${word(yesno(spouse_is_in_military))}
  - Edit:
      - marriage.have_experienced_domestic_violence
      - follow up:
        - marriage.have_experienced_domestic_violence_continue
    button: |
      ##### Has there been domestic violence or threats by your spouse?
        - ${word(yesno(marriage.have_experienced_domestic_violence))}
#
# ---------- users[0] ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Your Information</h2>""") }
#    show if: users[0].name.attribute_defined("first")
  - Edit:
      - users[0].name.first
    button: |
      ##### Your name
        - ${users[0]}
  - Edit:
      - users[0].has_previous_name
    button: |
      % if tool_ID == "JOD_only":
      ##### Your previous last name
        - ${users[0].attr("previous_last_name")}
      % elif tool_ID in ["divorce_complaint", "divorce_answer"]:
      ##### Your previous name
      % if users[0].has_previous_name:
        - ${users[0].previous_first_name + " " + users[0].previous_middle_name + " " + users[0].previous_last_name}
      % else:
        - None
      % endif
      % endif
  - Edit:
      - users[0].new_last_name_yn
    button: |
      ##### Your new last name
        - ${users[0].attr("new_last_name")}
  - Edit:
      - users[0].gender
    button: |
      ##### Your gender
        - ${users[0].gender.capitalize()}
  - Edit:
      - users[0].marriage_number
    button: |
      ##### Your marriage number
        - ${users[0].marriage_number.capitalize()}
  - Edit:
      - users[0].birthdate
    button: |
      ##### Your birthdate
        - ${users[0].birthdate}
  - Edit:
      - users[0].birthplace
    button: |
      ##### Your birthplace
        - ${users[0].birthplace}
  - Edit:
      - confidential_contact_info_yn
      - recompute:
        - interview_order_user_contact_info
      - invalidate:
        - interview_order_children # for Muskegon PT logic
        - venue
        - current_venue_options
        - all_potential_venue_options
        - check_for_required_venue
        - there_is_venue_controlling_separate_maintenance_case
        - court_index
        - the_court
        - the_foc
      # Note validation logic on confidential_contact_info_yn question
    button: |
      ##### Keep your contact info confidential?
        - ${word(yesno(confidential_contact_info_yn))}
  - Edit:
      - users[0].address.address
      - recompute: 
        - interview_order_user_contact_info
      - invalidate:
        - interview_order_children # for Muskegon PT logic
        - venue
        - current_venue_options
        - all_potential_venue_options
        - check_for_required_venue
        - there_is_venue_controlling_separate_maintenance_case
        - court_index
        - the_court
        - the_foc
      # Note validation logic on users[0].address.address question
    button: |
      % if tool_ID == "JOD_only" or (tool_ID == "divorce_complaint" and confidential_contact_info_yn):
      ##### Your ${"safe mailing address" if confidential_contact_info_yn else "address"}
        - ${users[0].address.on_one_line()}
      % elif not confidential_contact_info_yn:
      ##### Your address:
        - ${users[0].address.on_one_line()}
      % if users[0].lives_in_Michigan:
      ##### Have you lived in Michigan for 180+ days?
        - ${word(yesno(users[0].has_lived_6_months_MI))}
      % if users[0].has_lived_6_months_MI:
      ##### Have you lived in ${users[0].address.county} County for the last 10 days?
        - ${word(yesno(users[0].ten_days_in_county))}
      % endif
      % endif
      % endif
  - Edit:
      - users[0].lives_in_Michigan 
      - follow up:
        - users[0].ten_days_in_county
      - invalidate:
        - interview_order_children # because of Muskegon PT logic
        - venue
        - current_venue_options
        - all_potential_venue_options
        - check_for_required_venue
        - there_is_venue_controlling_separate_maintenance_case
        - court_index
        - the_court
        - the_foc
    button: |
      ##### Do you live in Michigan?
        - ${word(yesno(users[0].lives_in_Michigan))}   
      % if users[0].lives_in_Michigan:
      ##### Have you lived in Michigan for 180+ days?
        - ${word(yesno(users[0].has_lived_6_months_MI))}
      % if users[0].has_lived_6_months_MI:
      ##### Have you lived in ${users[0].address.county} County for the last 10 days?
        - ${word(yesno(users[0].ten_days_in_county))}
      % endif
      % endif
    show if: confidential_contact_info_yn
  - Edit:
      - users[0].address.county
    button: |
      ##### Your County
        - ${users[0].address.county}
    show if: (tool_ID == "divorce_complaint" and not users[0].lives_in_Michigan) or tool_ID == "JOD_only"
  - Edit:
      - users[0].village_or_township_yn
    button: |
      ##### Your village or township
        - ${users[0].attr("village_or_township")}
    show if: users[0].address.state == "MI"
  - Edit:
      - users[0].mailing_address.yesno
    button: |
      % if users[0].mailing_address.yesno:
      ##### Your mailing address
        - ${users[0].mailing_address.on_one_line()}
      % else:
      ##### You have a different mailing address
        - No
      % endif
  - Edit:
      - users[0].no_phone_number
    button: |
      ##### Your ${"safe phone number" if confidential_contact_info_yn else "phone number"}
        - ${ word("None") if users[0].no_phone_number else phone_number_formatted(users[0].phone_number) }
        % if tool_ID != "JOD_only" and not users[0].no_phone_number:
        - Type: ${ users[0].phone_type }
        % endif
  - Edit:
      - users[0].email
    button: |
      ##### Your email address
      % if users[0].email == "":
        - None
      % else:
        - ${users[0].email}
      % endif
      
#
# ---------- other_parties[0] ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Spouse's Information</h2>""") }
#    show if: other_parties[0].name.attribute_defined("first")
  - Edit:
      - other_parties[0].name.first
    button: |
      ##### Spouse's name
        - ${other_parties[0]}
  - Edit:
      - other_parties[0].has_previous_name
    button: |
      % if tool_ID == "JOD_only":
      ##### Spouse's previous last name
        - ${other_parties[0].attr("previous_last_name")}
      % elif tool_ID in ["divorce_complaint", "divorce_answer"]:
      ##### Your spouse's previous name
      % if other_parties[0].has_previous_name:
        - ${other_parties[0].previous_first_name + " " + other_parties[0].previous_middle_name + " " + other_parties[0].previous_last_name}
      % else:
        - None
      % endif
      % endif 
  - Edit:
      - other_parties[0].new_last_name_yn
    button: |
      ##### Spouse's new last name
        - ${other_parties[0].attr("new_last_name")}
  - Edit:
      - other_parties[0].gender
    button: |
      ##### Spouse's gender
        - ${other_parties[0].gender.capitalize()}
  - Edit:
      - other_parties[0].marriage_number
    button: |
      ##### Spouse's marriage number
        - ${other_parties[0].marriage_number.capitalize()}
  - Edit:
      - other_parties[0].birthdate
    button: |
      ##### Spouse's birthdate
        - ${other_parties[0].birthdate}
  - Edit:
      - other_parties[0].birthplace
    button: |
      ##### Spouse's birthplace
        - ${other_parties[0].birthplace}
  - Edit:
      - other_parties[0].address.address
      - recompute: 
        - interview_order_other_parties_address_info
      - follow up:
        - other_parties[0].village_or_township_yn
        - just_check_op_county
      - invalidate:
        - interview_order_children # because of Muskegon PT logic
        - venue
        - current_venue_options
        - all_potential_venue_options
        - check_for_required_venue
        - there_is_venue_controlling_separate_maintenance_case
        - court_index
        - the_court
        - the_foc
      # Note validation logic on other_parties[0].address.address question
    button: |
      % if tool_ID == "JOD_only":
      ##### Spouse's address
        - ${other_parties[0].address.on_one_line()}
      % elif tool_ID == "divorce_complaint":
      ##### Spouse's address
        - ${other_parties[0].address.on_one_line()}
      % if other_parties[0].lives_in_Michigan:
      ##### Has your spouse lived in Michigan for 180+ days?
        - ${word(yesno(other_parties[0].has_lived_6_months_MI))}
      % if other_parties[0].has_lived_6_months_MI:
      ##### Has your spouse lived in ${other_parties[0].address.county} County for the last 10 days?
        - ${word(yesno(other_parties[0].ten_days_in_county))}
      % endif
      % endif
      % endif
  - Edit:
      - other_parties[0].mailing_address_yn
    button: |
      ##### Your spouse has a different mailing address
        - ${word(yesno(other_parties[0].mailing_address_yn))}
      % if other_parties[0].mailing_address_yn:
      ##### Spouse's mailing address
        - ${other_parties[0].mailing_address.on_one_line()}
      % endif
  - Edit:
      - other_parties[0].address.county
    button: |
      ##### Spouse's County
        - ${other_parties[0].address.county}
    show if: (tool_ID == "divorce_complaint" and not other_parties[0].lives_in_Michigan) or tool_ID == "JOD_only"
  - Edit:
      - other_parties[0].village_or_township_yn
    button: |
      ##### Spouse's village or township
        - ${other_parties[0].attr("village_or_township")}
    show if: other_parties[0].address.state == "MI"
  - Edit:
      - other_parties[0].no_phone_number
    button: |
      ##### Spouse's phone number
        - ${word("Unknown") if other_parties[0].no_phone_number else phone_number_formatted(other_parties[0].phone_number)}
        % if tool_ID != "JOD_only" and not other_parties[0].no_phone_number:
        - Type: ${ other_parties[0].phone_type }
        % endif
  - Edit:
      - other_parties[0].email
    button: |
      ##### Spouse's email address
      % if other_parties[0].email == "":
        - None
      % else:
        - ${other_parties[0].email}
      % endif
  - Edit:
      - other_parties[0].has_attorney
      - invalidate:
        - other_parties[0].attorney.name.first
        - other_parties[0].attorney.name.middle
        - other_parties[0].attorney.name.last
        - other_parties[0].attorney.name.suffix
        - other_parties[0].attorney.bar_number
        - other_parties[0].attorney.address.address
        - other_parties[0].attorney.address.unit
        - other_parties[0].attorney.address.city
        - other_parties[0].attorney.address.state
        - other_parties[0].attorney.address.zip
        - other_parties[0].attorney.phone_number
      - recompute:
        - interview_order_other_parties_attorney
    button: |
      ##### Your spouse has a lawyer
        - ${word(yesno(other_parties[0].has_attorney))}

      % if other_parties[0].has_attorney:
      ##### Lawyer
        % if other_parties[0].attorney.name.attribute_defined("first"):
        - **Name:** ${other_parties[0].attorney}
        % endif
        % if other_parties[0].attorney.attribute_defined("bar_number"):
        - **Bar number:** ${other_parties[0].attorney.bar_number}
        % endif
        % if other_parties[0].attorney.address.attribute_defined("address"):
        - **Address:** ${other_parties[0].attorney.address.on_one_line()}
        % endif
        % if other_parties[0].attorney.attribute_defined("phone_number"):
        - **Phone number:** ${other_parties[0].attorney.phone_number}
        % endif
      % endif
    show if: tool_ID not in ["divorce_complaint", "custody_complaint"]
#
# ---------- marriage ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Marriage Information</h2>""") }
#    show if: marriage.attribute_defined("date")
  - Edit:
      - marriage.date
    button: |
      ##### When were you married?
        - ${marriage.date}
  - Edit:
      - marriage.address.country
    button: |
      ##### Where were you married?
        - **Country:** ${country_name(marriage.address.country)}
        % if marriage.address.country == "US":
        % if marriage.address.attr("state"):
        - **State:** ${state_name(marriage.address.attr("state"))}
        % endif
        % if marriage.address.attr("county"):
        - **County:** ${marriage.address.attr("county")}
        % endif
        % endif
        % if marriage.address.attr("city"):
        - **City, village, or township:** ${marriage.address.attr("city")}
        % endif
  - Edit:
      - marriage.living_together_yn
    button: |
      % if marriage.living_together_yn:
      ##### You and your spouse are currently living together
        - Yes
      % else:
      ##### Date you and your spouse stopped living together
        - ${marriage.living_together_stopped_date}
      % if there_are_marital_children:
        - Number of minor children living in household on this date: ${marriage.number_children_in_home_when_separated}
      % endif
      % endif
#
# ---------- spousal support ----------
#
# TODO ADD ACCORDION
  - Edit:
      - user_wants_temporary_spousal_support
      - follow up:
        - temp_spousal_support_info
    button: |
      ##### Need spousal support **before** divorce is final?
        - ${word(yesno(user_wants_temporary_spousal_support))}
  - Edit:
      - user_wants_post_divorce_support
      - recompute: 
        - interview_order_spousal_support
      - invalidate:
        - interview_order_user_employment
      # Note validation logic on user_wants_post_divorce_support question
    button: |
      ##### Need spousal support **after** divorce is final?
        - ${word(yesno(user_wants_post_divorce_support))}  
  - Edit:
      - spousal_support_provisions
      - follow up:
        - spousal_support_is_immutable
      - invalidate:
        - interview_order_user_employment
    button: |
      ##### Spousal support agreement?
        % if user_wants_post_divorce_support:
        % if spousal_support_provisions == "someone_wants_spousal_support_no_agreement":
        - ${ other_parties[0] } **does not agree to pay** spousal support.
        % elif spousal_support_provisions == "OP_position_unknown":
        - **I'm not sure** if ${ other_parties[0] } will agree to pay spousal support.
        % elif spousal_support_provisions == "OP_agrees_to_pay_spousal_support":
        - ${ other_parties[0] } **has agreed to pay** spousal support **to me**.
        % endif
        % elif not user_wants_post_divorce_support:
        % if spousal_support_provisions == "someone_wants_spousal_support_no_agreement":      
        - ${ other_parties[0] } wants spousal support, but I do not agree to pay it.
        % elif spousal_support_provisions == "OP_position_unknown":
        - I'm not sure if ${ other_parties[0] } is going to ask for spousal support.
        % elif spousal_support_provisions == "agree_no_current_spousal_support_but_may_change":
        - ${ other_parties[0] } and I both agree that neither one of us will pay spousal support when the divorce is done, but either of us can ask for spousal support in the future.
        % elif spousal_support_provisions == "agree_never_spousal_support": 
        - ${ other_parties[0] } and I both agree that neither one of us will ever pay spousal support to the other. We are both willing to give up our right to ever ask for spousal support, even if circumstances change.
        % elif spousal_support_provisions == "user_agrees_to_pay_spousal_support":
        - We agree that **I will pay spousal support** to ${ other_parties[0] }.
        % endif
        % endif
      % if spousal_support_provisions in ["user_agrees_to_pay_spousal_support", "OP_agrees_to_pay_spousal_support"]:
      ##### Amount
        - ${ currency(spousal_support_amount) } monthly
      ##### Start date
        - ${ format_date(spousal_support_start_date, format='M/d/yyyy') }
      ##### Spousal support payments will stop:
        % if spousal_support_end_type == "at_certain_date":
        - On ${ format_date(spousal_support_end_date, format='M/d/yyyy') }
        % elif spousal_support_end_type == "at_certain_amount":
        - Once ${ currency(spousal_support_end_amount) } has been paid
        % elif spousal_support_end_type == "at_recipient_marriage":
        - When person receiving support remarries
        % elif spousal_support_end_type == "at_death":
        - When either of us dies
        % elif spousal_support_end_type == "other":
        - Other: ${ spousal_support_end_custom }
        % endif
      ##### Do you both agree to give up the right to ask for any future changes to spousal support?
        - ${word(yesno(spousal_support_is_immutable))}  
      % endif
  - Edit:
      - ss_factor_one_division_labor
    button: |
      ##### Spousal Support Factor One
        - Division of labor: ${ "*no response*" if ss_factor_one_division_labor == "" else ss_factor_one_division_labor}
        - Fault: ${ "*no response*" if ss_factor_one_fault == "" else ss_factor_one_fault}
  - Edit:
      - ss_factor_two_length
    button: |
      ##### Spousal Support Factor Two
        - Marriage length: ${ "*no response*" if ss_factor_two_length == "" else ss_factor_two_length}
  - Edit:
      - ss_factor_three_work_user
    button: |
      ##### Spousal Support Factor Three
        - Your ability to work: ${ "*no response*" if ss_factor_three_work_user == "" else ss_factor_three_work_user}
        - Spouse's ability to work: ${ "*no response*" if ss_factor_three_work_OP == "" else ss_factor_three_work_OP}
  - note: |
      No input needed for Spousal Support Factor Four
    show if: ss_factor_four_property
  - note: |
      No input needed for Spousal Support Factor Five
    show if: ss_factor_five_ages
  - Edit:
      - ss_factor_six_ability_to_pay
    button: |
      ##### Spousal Support Factor Six
        - Spouse's ability to pay support: ${ "*no response*" if ss_factor_six_ability_to_pay == "" else ss_factor_six_ability_to_pay}
  - Edit:
      - ss_factor_seven_situation
    button: |
      ##### Spousal Support Factor Seven
        - Anything else judge should know about the situation: ${ "*no response*" if ss_factor_seven_situation == "" else ss_factor_seven_situation}
  - Edit:
      - ss_factor_eight_need
    button: |
      ##### Spousal Support Factor Eight
        - Your need for support: ${ "*no response*" if ss_factor_eight_need == "" else ss_factor_eight_need}
  - Edit:
      - ss_factor_nine_health
    button: |
      ##### Spousal Support Factor Nine
        - Your health or disabilities: ${ "*no response*" if ss_factor_nine_health == "" else ss_factor_nine_health}
  - Edit:
      - ss_factor_ten_standards
    button: |
      ##### Spousal Support Factor Ten
        - Standard of living: ${ "*no response*" if ss_factor_ten_standards == "" else ss_factor_ten_standards}
        - People you support: ${ "*no response*" if ss_factor_ten_responsibilities == "" else ss_factor_ten_responsibilities}
  - Edit:
      - ss_factor_ten_standards
    button: |
      ##### Spousal Support Factor Eleven
        - Contributions during marriage: ${ "*no response*" if ss_factor_eleven_contributions == "" else ss_factor_eleven_contributions}
  - Edit:
      - ss_factor_twelve_fault_redux
    button: |
      ##### Spousal Support Factor Twelve
        - Anything else about fault: ${ "*no response*" if ss_factor_twelve_fault_redux == "" else ss_factor_twelve_fault_redux}
  - Edit:
      - ss_factor_thirteen_cohabitation
    button: |
      ##### Spousal Support Factor Thirteen
        - Are you living/sharing expenses with an unrelated adult?: ${ "*no response*" if ss_factor_thirteen_cohabitation == "" else ss_factor_thirteen_cohabitation}
  - Edit:
      - ss_factor_thirteen_cohabitation
    button: |
      ##### Spousal Support Factor Fourteen
        - Any other reasons it is fair for you to get spousal support: ${ "*no response*" if ss_factor_fourteen_equity == "" else ss_factor_fourteen_equity}
#
# ---------- children and pregnancy ----------
#
# TODO ADD ACCORDION
  - note: |
      ##### Children
      % for child in children.filter(legal_parent="both"):
        **${ child }** (DOB: ${format_date(child.birthdate, format='M/d/yyyy')})

        - Gender: ${ child.gender }
        - SSN: ${ child.ssn_last_four }
        - You and ${ other_parties[0] } are **both legal parents.**
      
      % endfor
      % for child in children:
      % if child.legal_parent != "both":
      **${ child }** ${ word("") if not defined("child.birthdate") else "(DOB: " + format_date(child.birthdate, format='M/d/yyyy') + ")" if child.birthdate != None else "(DOB: not provided)" }
      
      % if defined("child.gender"):
      % if child.gender != "":
        - Gender: ${ child.gender }
      % else:
        - Gender: not provided"
      % endif
      % endif
      % if child.legal_parent == "user":
        - **You are their legal parent.** ${ other_parties[0] } is not.
      % elif child.legal_parent == "other_party":
        - **${ other_parties[0] } is their legal parent.** You are not.
      % endif
      
      % endif
      % endfor     
    show if: children.there_are_any and child_legal_parent_review_screen
    # using child_legal_parent_review_screen as a proxy for having finished child gathering once
  - Edit:
      - children.there_are_any
      - follow up:
        - children.revisit
      - invalidate:
        - set_marital_children_or_not
        - set_child_home_choices
        - guidepost_marital_children
        - kids_had_other_custodian
        - third_party_custody_claim
        - need_temporary_order_kids
        - temporary_order_kids_exit
        - interview_order_home_state
        - set_children_home_state_info
        - jurisdiction_for_custody
        - children_live_with_parent
        - children_now_live_with_which_parent
        - children_lived_with_which_parent_past
        - interview_order_stepchild_address
        - tax_choices
        - income_tax_method
        - insurance_in_addendum
        - interview_order_pregnancy
        - interview_order_user_employment
        - interview_order_user_income
        - interview_order_income_tax
        - there_is_venue_controlling_separate_maintenance_case
        - check_for_required_venue
        - venue
        - court_index
        - the_court
        - the_foc
      - recompute:
        - children_previous_address.gathered_reset
        - interview_order_children
        - prior_family_cases.gathered_deep_reset
      # EKM note: currently leaving some all-children questions out of the invalidate list because I'm OK with just asking them once and not re-asking unless user specifically wants to edit them.
    button: |
      % if children.there_are_any:
      ##### **Add or remove** a child
      % else:
      ##### Any minor children?
        - ${word(yesno(children.there_are_any))}
      % endif
  - Edit:
      - child_demographics_review_screen
    button: |
      ##### Edit a child's **name and basic info**
    show if: children.there_are_any
  - Edit:
      - child_legal_parent_review_screen
      - invalidate:
        - set_marital_children_or_not
        - set_child_home_choices
        - guidepost_marital_children
        - kids_had_other_custodian
        - third_party_custody_claim
        - need_temporary_order_kids
        - temporary_order_kids_exit
        - interview_order_home_state
        - set_children_home_state_info
        - jurisdiction_for_custody
        - children_live_with_parent
        - children_now_live_with_which_parent
        - children_lived_with_which_parent_past
        - interview_order_stepchild_address
        - tax_choices
        - income_tax_method
        - insurance_in_addendum
        - interview_order_pregnancy
        - interview_order_user_employment
        - interview_order_user_income
        - interview_order_income_tax
        - there_is_venue_controlling_separate_maintenance_case
        - check_for_required_venue
        - venue
        - court_index
        - the_court
        - the_foc
      - recompute:
        - children_previous_address.gathered_reset
        - interview_order_children
        - prior_family_cases.gathered_deep_reset
      # EKM note: currently leaving some all-children questions out of the invalidate list because I'm OK with just asking them once and not re-asking unless user specifically wants to edit them.
    button: |
      ##### Edit a child's **legal parent** info
    show if: children.there_are_any
  - note: |
      <hr>
    show if: children.there_are_any and child_legal_parent_review_screen
  - Edit:
      - home_state_review_screen
      - invalidate:
        - set_children_home_state_info
      - recompute: 
        - interview_order_home_state
      - invalidate:
        - jurisdiction_for_custody
    button: |-
      ##### Marital children's legal "home state"
      % for child in children.filter(legal_parent="both"):
        - ${ child.familiar() } currently lives in ${ child.currently_resides_in_locality_display_name }. This is ${ "" if child.current_residence_is_home_state else word("**not**") } their legal "home state". 
        % if not (child.currently_resides_in_type == "Michigan" and child.current_residence_is_home_state) and (child.age_in_months() >= 6 and not child.current_residence_is_home_state and child.currently_resides_in_locality != "MI" and child.spent_six_months_in_michigan and child.MI_stay_ended_when == "within_six_months"):
        Their legal home state is Michigan becaues they recently lived in Michigan for 6 months.
        % endif
      % endfor
    show if: there_are_marital_children
  - Edit:
      - children_live_with_parent
      - invalidate:
        - child_address_not_confidential_warning
      - recompute:
        - interview_order_children
      # Note validation logic on children_live_with_parent
    button: |
      ##### Home of marital children
      ${ comma_and_list(children.filter(legal_parent='both').familiar()) } ${ children.filter(legal_parent="both").does_verb('live') } with: 
        % if children_now_live_with_which_parent == "users[0]":
        you.
        % elif children_now_live_with_which_parent == "other_parties[0]":
        your spouse.
        % elif children_now_live_with_which_parent == "both":
        you and your spouse.
        % elif children_now_live_with_which_parent == "depends_on_child": 
      
        % for child in children.filter(legal_parent='both'):  
        - ${ child.familiar() } lives with ${ word("you") if child.lives_with == "users[0]" else word("your spouse") }.
        % endfor
        % endif
    show if: there_are_marital_children
  - Edit:
      - recompute:
        - children_previous_address.gathered_reset
      - children_previous_address.there_are_any
      - children_lived_with_which_parent_past
      - recompute:
        - interview_order_children
    button: |
      ##### Past homes of marital children
        - Over the last 5 years, ${ comma_and_list(children.filter(legal_parent='both').familiar()) } lived with 
        % if children_lived_with_which_parent_past == "users[0]":
        you.
        % elif children_lived_with_which_parent_past == "other_parties[0]":
        your spouse.
        % elif children_lived_with_which_parent_past == "both":
        you and your spouse.
        % endif
        - In the last five years, ${ word("one or more children moved") if children_previous_address.there_are_any else word("they did not move") } to a new address.
        % if children_previous_address.there_are_any:
        - Past addresses:
      
        % for address in children_previous_address:
          - ${ address.on_one_line() }---Dates: ${ address.start_date } to ${ address. end_date }
        % endfor
        % endif
    show if: there_are_marital_children
  - Edit:
      - legal_custody_who
      - invalidate:
        - Muskegon_specific_PT_info
        - specific_PT_how
        - hague_convention_info
      - recompute:
        - interview_order_children
    button: |
      ##### Child custody and parenting time
      
        % if legal_custody_who == "user":
        - **You**
        % elif legal_custody_who == "other_party":
        - **Your spouse**
        % elif legal_custody_who == "both":
        - **Both you and your spouse**
        % endif
        should have legal custody.
        % if physical_custody_who == "user":
        - **You**
        % elif physical_custody_who == "other_party":
        - **Your spouse**
        % elif physical_custody_who == "both":
        - **Both you and your spouse**
        % endif
        should have physical custody.
        % if physical_custody_who != "both":
        - ${ word("Your spouse") if physical_custody_who == "user" else word("You") } **${ word("should") if PT_who == "both" else word("should not") }** have parenting time.
        % endif
        % if physical_custody_who == "both" or PT_who == "both":
        - Type of parenting time: **${ PT_type }**
        % endif
        % if physical_custody_who != "both" and PT_who == "both" and PT_type == "supervised":
        - Preferred supervisor: ${ PT_supervisor }
        % endif
        % if (physical_custody_who == "both" or PT_who == "both") and PT_type in ["specific", "supervised"] and not ((tool_ID == "divorce_complaint" and (users[0].lives_in_Michigan and users[0].has_lived_6_months_MI and users[0].address.county == "Muskegon") or (other_parties[0].lives_in_Michigan and other_parties[0].has_lived_6_months_MI and other_parties[0].address.county == "Muskegon")) or (tool_ID == "JOD_only" and county_choice == "Muskegon")):  
        - Schedule type: 
        % if specific_PT_how == "custom":
        **you write the schedule.**
        % elif specific_PT_how == "FOC_sample":
        **use sample from Friend of the Court.**
        % endif
        % endif   
    show if: there_are_marital_children
  - Edit:
      - custom_PT_details
    button: |
      ##### Custom parenting time plan:
      ${ custom_PT_details }
    show if: there_are_marital_children and ((physical_custody_who == "both" or PT_who == "both") and PT_type in ["specific", "supervised"]) and (((tool_ID == "divorce_complaint" and (users[0].lives_in_Michigan and users[0].has_lived_6_months_MI and users[0].address.county == "Muskegon") or (other_parties[0].lives_in_Michigan and other_parties[0].has_lived_6_months_MI and other_parties[0].address.county == "Muskegon")) or (tool_ID == "JOD_only" and county_choice == "Muskegon")) or specific_PT_how == "custom")
  - Edit:
      - child_domicile_info
      - hundred_mile_rule
    button: |
      ##### 100-mile rule
      - You and your spouse currently live ${ word("more than 100 miles away from each other.") if already_over_100_miles else word("within 100 miles of each other.") }
      % if not already_over_100_miles:
      - You and your spouse **${ word("agree") if allow_over_100_miles else word("don't agree") }** either of you may move more than 100 miles from where you currently live, as long as you stay in Michigan.
      % endif
    show if: there_are_marital_children and legal_custody_who == "both"
  - Edit:
      - allow_child_support_overpayment_correction
    button: |
      ##### Child support overpayments
      % if allow_child_support_overpayment_correction:
      - If you end up receiving too much child support due to an error by the State of Michigan, you **authorize** the State to take **${ word("10%") if child_support_overpayment_percentage == "ten" else word("25%") if child_support_overpayment_percentage == "twentyfive" else word("50%") }** from future child support payments until the mistake is corrected. 
      % else:
      - If you end up receiving too much child support due to an error by the State of Michigan, you **do not authorize** the State to take a percentage from future child support payments until the mistake is corrected. 
      % endif
    show if: there_are_marital_children
  - Edit:
      - income_tax_method
      - invalidate:
        - tax_deductions_who_first
      - recompute:
        - interview_order_income_tax
      # Note validation logic on income_tax_method
    button: |
      ##### Income tax deductions and credits for ${ comma_and_list(children.filter(legal_parent='both').familiar()) } 
        % if income_tax_method == "user":
        **${ users[0] }** will be awarded all income tax deductions, credits, and exemptions for the ${ children.filter(legal_parent='both').as_noun() } for all tax years starting with ${ tax_start_year }.
        % elif income_tax_method == "other_party":
        **${ other_parties[0] }** will be awarded all income tax deductions, credits, and exemptions for the ${ children.filter(legal_parent='both').as_noun() } for all tax years starting with ${ tax_start_year }.
        % elif income_tax_method == "default":
        The **parent with whom ${ children.filter(legal_parent='both')[0].familiar() if len(children.filter(legal_parent='both')) == 1 else word("each child") } lives for more nights during a tax year** will be awarded all income tax deductions, credits, and exemptions for that child for that tax year.
        % elif income_tax_method == "alternate_years":
        ${ word("You") if tax_deductions_who_first == "users[0]" else other_parties[0] } will get the deductions, credits, and exemptions for tax year ${ tax_start_year }. ${ other_parties[0] if tax_deductions_who_first == "users[0]" else word("You") } will claim them for tax year ${ tax_start_year + 1 }. You will continue to claim the exemptions and deductions in **alternating years.**
        % elif income_tax_method == "specify_per_child": 
        ${ users[0] } and ${ other_parties[0] } will claim the deductions, credits, and exemptions for **different children** starting with tax year ${ tax_start_year }:
      
        % for child in children.filter(legal_parent='both'):  
        - ${ child }'s tax deductions and credits will be claimed by **${ word("you") if child.tax_parent == "users[0]" else other_parties[0] }.**
        % endfor
        % endif     
    show if: there_are_marital_children
  - Edit:
      - stepchild_address_review_screen
    button: |-
      ##### Stepchildren's addresses
      % for child in children:
      % if child.legal_parent != "both":
      % if child.stepchild_lives_with == "user":
      - ${ child.familiar() } lives with you.
      % if confidential_contact_info_yn:
      (address confidential)
      % endif
      % elif child.stepchild_lives_with == "other_party":
      - ${ child.familiar() } lives with your spouse.
      % elif child.stepchild_lives_with == "other":
      % if child.stepchild_address_confidential:
      - ${ child.familiar() } does not live with you or your spouse. (Address confidential.)
      % else:
      - ${ child.familiar() } lives at ${child.address.on_one_line()}.
      % endif
      % endif    
      % endif
      % endfor
    show if: children.there_are_any and len(children.filter(legal_parent='user') + children.filter(legal_parent='other_party')) > 0
  - Edit:
      - users[0].pregnant
      - other_parties[0].pregnant
    button: |
      ##### Are you pregnant?
        - ${word(yesno(users[0].pregnant))}
      ##### Is spouse pregnant?
        - ${word(yesno(other_parties[0].pregnant))}  
#
# ---------- prior cases ----------
# TODO add accordion?
  - Edit:
      - prior_family_cases.there_are_any
      - invalidate:
        - there_is_venue_controlling_separate_maintenance_case
        - venue
        - check_for_required_venue
        - court_index
        - the_court
        - the_foc
    button: |
      % if tool_ID == "JOD_only":
      ##### Any prior custody or support orders?
      % else:
      ##### Any prior family division cases?
      % endif
        - ${word(yesno(prior_family_cases.there_are_any))}
    show if: len(prior_family_cases.complete_elements()) < 1
  - Edit:
      - prior_family_cases.revisit
      - invalidate:
        - there_is_venue_controlling_separate_maintenance_case
        - venue
        - check_for_required_venue
        - court_index
        - the_court
        - the_foc
    show if: prior_family_cases.there_are_any
    button: |
      % if tool_ID == "JOD_only":
      ##### Custody or support cases
      % else:
      ##### Family division cases?
      % endif
      
      % if tool_ID == "JOD_only":
      % for case in prior_family_cases:
      **Case ${case.docket_number}**
      
        - State or territory: ${case.state}
        - Case status: ${case.status}
        - Custody or parenting time order in effect? **${word(yesno(case.has_current_custody_PT_order))}**
        - Child support order in effect? **${word(yesno(case.has_child_support_order))}**

      % endfor
      % else:
      % for case in prior_family_cases:
      **Case ${case.docket_number}** (${prior_family_case_types_ordered[case.type]})

        - ${case.title}
        - ${case.county} County, ${case.state}
        % if defined("case.court"):
        - ${case.court}
        % if defined("case.address"):
        ${"-- " + case.address}
        % endif
        % endif
        - Judge ${case.judge}
        % if case.type == "other":
        case.type_description
        % endif
        - Case status: ${word("ended with final order") if case.status == "ended_with_order" else word("ongoing") if case.status == "pending" else case.status }
        % if case.type == "separate_maintenance":
        - Involved custody, parenting time, or child support? **${word(yesno(case.involved_custody_pt_support))}**
        % endif
        % if case.type == "divorce" or (case.type == "separate_maintenance" and case.involved_custody_pt_support):
        - Included custody or parenting time order? **${word(yesno(case.included_custody_PT_order))}**
        % if case.included_custody_PT_order:
        - Date of custody/PT order: ${case.custody_PT_order_date}
        % endif
        % endif
        % if case.type not in ["divorce", "separate_maintenance"]:
        % if case.status == "ended_with_order":
        - Date of final judgment or order: ${case.final_order_date}
        % endif
        % if case.status in ["ended_with_order", "stayed", "pending"]:
        - Included custody or parenting time order? **${word(yesno(case.included_custody_PT_order))}**
        % if case.included_custody_PT_order:
        - Custody/parenting time order currently in effect? **${word(yesno(case.has_current_custody_PT_order))}**
        % if case.status in ["stayed", "pending"]:
        - Date of custody/PT order: ${case.custody_PT_order_date}
        % endif
        % endif
        - Child support order currently in effect? **${word(yesno(case.has_child_support_order))}**
        % elif case.status == "dismissed":
        - Custody or parenting time order? **${word(yesno(case.included_custody_PT_order))}**
        - Date of custody/PT order: ${case.custody_PT_order_date}
        % endif
        % endif
      
      % endfor
      % endif
  - Edit:
      - child_support_request_pending
    button: |
      ##### Active out-of-state child support requests?
        - ${word(yesno(child_support_request_pending))}
  - Edit:
      - has_prior_civil_cases
    button: |
      ##### Active or resolved civil (not family court) action
      % if has_prior_civil_cases:
      % if prior_civil_case_is_pending != None:
        - This case is **${ word("active.") if prior_civil_case_is_pending else word("over.") }**
      % else:
        - Case status: not provided
      % endif
      % if prior_civil_case_filed_outside_MI:
        - Case outside Michigan. Court name: ${ prior_civil_case_non_MI_court if prior_civil_case_non_MI_court != "" else word("not provided") }
      % else:
        - Court type: ${ MI_court_type if MI_court_type != "" else word("not provided") }
        - Michigan County: ${ prior_civil_case_county if prior_civil_case_county != "" else word("not provided") }
      % endif
        - Case number: ${ prior_civil_case_number if prior_civil_case_number != "" else word("not provided") }
        - Judge's last name: ${ prior_civil_case_judge if prior_civil_case_judge != "" else word("not provided")  }
      % else:
        - None
      % endif    
#
# ---------- income, insurance, etc? ----------
#
# todo accordion
  - Edit:
      - users[0].insurance.there_are_any
      - follow up:
        - users[0].insurance.revisit
      - invalidate:
        - insurance_in_addendum
    button: |
      ##### Your health coverage
        - You **${ word("have") if users[0].insurance.there_are_any else word("don't have")}** your own health care coverage through an employer, Medicaid or Medicare, or privately.
    show if: there_are_marital_children and len(users[0].insurance.complete_elements()) < 1
  - Edit:
      - users[0].insurance.revisit
      - invalidate:
        - insurance_in_addendum
    button: |
      ##### Your health coverage
      % for policy in users[0].insurance:
      **${policy.company_name}**
      
        - Provider address: ${ policy.company_address if policy.company_address != "" else word("not answered") }
        - Coverage type: ${comma_and_list(policy.coverage_type.true_values()) if policy.coverage_type.any_true() else word("not answered") }
        - Children covered: ${comma_and_list(policy.covers_child.true_values()) if policy.covers_child.any_true() else word("none")}
      % if policy.in_own_name == None:
        - Named policy holder: not answered
      % elif policy.in_own_name:
        - Named policy holder: ${ users[0] }
      % elif not policy.in_own_name: 
        - Named policy holder: ${ policy.policyholder }
      % endif
        - Policy number: ${ policy.policy_number if policy.policy_number != "" else word("not answered") }
        - Certificate number: ${ policy.certificate_number if policy.certificate_number != "" else word("not answered") }
      
      % endfor
    show if: there_are_marital_children and users[0].insurance.there_are_any
  - Edit:
      - other_parties[0].insurance.there_are_any
      - follow up:
        - other_parties[0].insurance.revisit
      - invalidate:
        - insurance_in_addendum
    button: |
      ##### ${ capitalize(OP_label) }’s health coverage
        - ${ capitalize(OP_label) } **${ word("has") if other_parties[0].insurance.there_are_any else word("doesn't have")}** their own health care coverage through an employer, Medicaid or Medicare, or privately.
    show if: there_are_marital_children and len(other_parties[0].insurance.complete_elements()) < 1
  - Edit:
      - other_parties[0].insurance.revisit
      - invalidate:
        - insurance_in_addendum
    button: |
      ##### ${ capitalize(OP_label) }’s health coverage
      % for policy in other_parties[0].insurance:
      **${policy.company_name}**
      
        - Provider address: ${ policy.company_address if policy.company_address != "" else word("not answered") }
        - Coverage type: ${comma_and_list(policy.coverage_type.true_values()) if policy.coverage_type.any_true() else word("not answered")}
        - Children covered: ${comma_and_list(policy.covers_child.true_values()) if policy.covers_child.any_true() else word("none")}
      % if policy.in_own_name == None:
        - Named policy holder: not answered
      % elif policy.in_own_name:
        - Named policy holder: ${ other_parties[0] }
      % elif not policy.in_own_name: 
        - Named policy holder: ${ policy.policyholder }
      % endif
        - Policy number: ${ policy.policy_number if policy.policy_number != "" else word("not answered") }
        - Certificate number: ${ policy.certificate_number if policy.certificate_number != "" else word("not answered") }

      % endfor
    show if: there_are_marital_children and other_parties[0].insurance.there_are_any
  - Edit:
      - users[0].has_job
      - follow up:
        - users[0].job.employer.name.first
      - invalidate:
        - interview_order_user_income
    button: |
      ##### Are you currently employed?
        - ${ word("not answered") if users[0].has_job == None else word(yesno(users[0].has_job)) }
      % if users[0].has_job:
        - Employer: ${ users[0].job.employer.name.first if users[0].job.employer.name.first != "" else word("not answered")}
        - ${ users[0].job.employer.address.on_one_line() if users[0].job.employer.address.address != "" or users[0].job.employer.address.city != "" else word("address not given")}
        - ${ phone_number_formatted(users[0].job.employer.phone) if users[0].job.employer.phone != "" else word("no phone given")}
        - FEIN: ${ users[0].job.FEIN if users[0].job.FEIN != "" else word("unknown")}
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support or spousal_support_provisions == "user_agrees_to_pay_spousal_support"
  - Edit:
      - users[0].occupation
    button: |
      ##### Your occupation
        - ${ users[0].occupation if users[0].occupation != "" else word("not answered")}
    show if: tool_ID != "JOD_only" and (there_are_marital_children or user_wants_post_divorce_support)
  - Edit:
      - users[0].has_professional_license
    button: |
      ##### Do you have a professional license?
        - ${ word("not answered") if users[0].has_professional_license == None else word(yesno(users[0].has_professional_license)) }
      % if users[0].has_professional_license:
        - License number: ${ users[0].professional_license_number if users[0].professional_license_number != "" else word("not answered")}
        - Type: ${ users[0].professional_license_type if users[0].professional_license_type != "" else word("not answered")}
        - State/territory: ${ users[0].professional_license_state if users[0].professional_license_state != "" else word("not answered")}
        - Date: ${ users[0].professional_license_date if users[0].professional_license_date != None else word("not answered")}
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support or spousal_support_provisions == "user_agrees_to_pay_spousal_support"
  - Edit:
      - other_parties[0].has_job
      - follow up:
        - other_parties[0].job.employer.name.first
      - invalidate:
        - interview_order_other_party_income
    button: |
      ##### Spouse currently employed?
        - ${ word("not answered") if other_parties[0].has_job == None else word(yesno(other_parties[0].has_job)) }
      % if other_parties[0].has_job:
        - Employer: ${ other_parties[0].job.employer.name.first if other_parties[0].job.employer.name.first != "" else word("not answered")}
        - ${ other_parties[0].job.employer.address.on_one_line() if other_parties[0].job.employer.address.address != "" or other_parties[0].job.employer.address.city != "" else word("address not given")}
        - ${ phone_number_formatted(other_parties[0].job.employer.phone) if other_parties[0].job.employer.phone != "" else word("no phone given")}
        - FEIN: ${ other_parties[0].job.FEIN if other_parties[0].job.FEIN != "" else word("unknown")}
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support or spousal_support_provisions == "user_agrees_to_pay_spousal_support"
  - Edit:
      - other_parties[0].occupation
    button: |
      ##### Spouse's occupation
        - ${ other_parties[0].occupation if other_parties[0].occupation != "" else word("not answered")}
    show if: tool_ID != "JOD_only" and (there_are_marital_children or user_wants_post_divorce_support)
  - Edit:
      - other_parties[0].has_professional_license
    button: |
      ##### Spouse has professional license?
        - ${ word("not answered") if other_parties[0].has_professional_license == None else word(yesno(other_parties[0].has_professional_license)) }
      % if other_parties[0].has_professional_license:
        - License number: ${ other_parties[0].professional_license_number if other_parties[0].professional_license_number != "" else word("not answered")}
        - Type: ${ other_parties[0].professional_license_type if other_parties[0].professional_license_type != "" else word("not answered")}
        - State/territory: ${ other_parties[0].professional_license_state if other_parties[0].professional_license_state != "" else word("not answered")}
        - Date: ${ other_parties[0].professional_license_date if other_parties[0].professional_license_date != None else word("not answered")}
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support or spousal_support_provisions == "user_agrees_to_pay_spousal_support"
  - Edit:
      - users[0].income.value
    button: |
      ##### Your income
        - Paycheck amount: ${ word("not answered") if users[0].income.value == 0.0 else word(currency(users[0].income.value)) }
        - Paycheck frequency: ${ word("not answered") if users[0].income.times_per_year == None else word("once a week") if users[0].income.times_per_year == 52 else word("every two weeks") if users[0].income.times_per_year == 26 else word("twice a month") if users[0].income.times_per_year == 24 else word("once a month") }
    show if: there_are_marital_children or user_wants_post_divorce_support and users[0].has_job #for FOC23; never asked for JOD-only
  - Edit:
      - pa_status
      - invalidate:
        - public_assistance_list
        - pa_case_numbers_foc_23
        - pa_mdhhs
      - recompute:
        - interview_order_user_income
    button: |
      ##### Your public assistance based on having low income
        - ${ word("not answered") if pa_status == None else word("Applied, but not yet getting anything") if pa_status == "applied" else word("Currently getting assistance") if pa_status == "gets_assistance" else word("No active assistance or application") if pa_status == "none" else word("unknown") }
  - Edit:
      - pa_food_assistance_program
      - follow up:
        - pa_other_types
      - invalidate:
        - pa_case_numbers_foc_23
        - public_assistance_list
        - pa_mdhhs
      - recompute:
        - interview_order_user_income
    button: |
      ##### Your public assistance programs
        - ${ comma_and_list(public_assistance_list) }
    show if: pa_status == "gets_assistance" or (pa_status == "applied" and (there_are_marital_children or user_wants_post_divorce_support))
  - Edit:
      - pa_mdhhs_case_number
      - recompute:
        - pa_case_numbers_foc_23
    button: |
      ##### Your MDHHS case number: ${pa_mdhhs_case_number}
    show if: pa_status == "gets_assistance" and pa_mdhhs
  - Edit: 
      - pa_ssa_number
      - recompute:
        - pa_case_numbers_foc_23
    button: |
      ##### Your SSI case number: ${pa_ssa_number}
    show if: pa_status == "gets_assistance" and pa_supplemental_security and not (pa_mdhhs or pa_other)
  - Edit:
      - pa_other_types
      - recompute:
        - public_assistance_list
        - pa_case_numbers_foc_23
    button: |
      ##### Your ${ pa_other_types } case number(s): ${pa_other_case_numbers}
    show if: pa_status == "gets_assistance" and pa_other
  - Edit:
      - other_parties[0].income.value
    button: |
      ##### ${other_parties[0]}'s income
        - Paycheck amount: ${ word("not answered") if other_parties[0].income.value == 0.0 else word(currency(other_parties[0].income.value)) }
        - Paycheck frequency: ${ word("not answered") if other_parties[0].income.times_per_year == None else word("once a week") if other_parties[0].income.times_per_year == 52 else word("every two weeks") if other_parties[0].income.times_per_year == 26 else word("twice a month") if other_parties[0].income.times_per_year == 24 else word("once a month") }
    show if: there_are_marital_children or user_wants_post_divorce_support and other_parties[0].has_job #for FOC23; never asked for JOD-only
  - Edit:
      - other_party_pa_status
      - invalidate:
        - op_public_assistance_list
        - op_pa_case_numbers_foc_23
      - recompute:
        - interview_order_other_party_income
    button: |
      ##### ${other_parties[0]}'s public assistance based on having low income
        - ${ word("not answered") if other_party_pa_status == None else word("Applied, but not yet getting anything") if other_party_pa_status == "applied" else word("Currently getting assistance") if other_party_pa_status == "gets_assistance" else word("No active assistance or application") if other_party_pa_status == "none" else word("unknown") }
    show if: there_are_marital_children or user_wants_post_divorce_support
  - Edit:
      - op_pa_food_assistance_program
      - follow up:
        - op_pa_other_types
      - invalidate:
        - op_public_assistance_list
        - op_pa_case_numbers_foc_23
      - recompute:
        - interview_order_other_party_income
    button: |
      ##### ${other_parties[0]}'s public assistance programs
        - ${ comma_and_list(op_public_assistance_list) }
    show if: (there_are_marital_children or user_wants_post_divorce_support) and other_party_pa_status in ["gets_assistance", "applied"]
  - Edit:
      - op_pa_mdhhs_case_number
      - recompute:
        - op_pa_case_numbers_foc_23
    button: |
      ##### ${other_parties[0]}'s MDHHS case number: ${op_pa_mdhhs_case_number}
    show if: other_party_pa_status == "gets_assistance" and op_pa_food_assistance_program or op_pa_medicaid or op_pa_family_independence_program or op_pa_women_infants_children or op_pa_state_disability or op_pa_state_emergency_relief or op_pa_refugee_assistance
  - Edit: 
      - op_pa_ssa_number
      - recompute:
        - op_pa_case_numbers_foc_23
    button: |
      ##### ${other_parties[0]}'s SSI case number: ${op_pa_ssa_number}
    show if: other_party_pa_status == "gets_assistance" and op_pa_supplemental_security and not (op_pa_food_assistance_program or op_pa_medicaid or op_pa_family_independence_program or op_pa_women_infants_children or op_pa_state_disability or op_pa_state_emergency_relief or op_pa_refugee_assistance or op_pa_other)
  - Edit:
      - op_pa_other_types
      - recompute:
        - op_public_assistance_list
        - op_pa_case_numbers_foc_23
    button: |
      ##### ${other_parties[0]}'s other assistance case number: ${op_pa_other_case_numbers}
    show if: other_party_pa_status == "gets_assistance" and op_pa_other
#
# ---------- identifying information ----------
#
  - Edit:
      - users[0].ssn
    button: |
      ##### Your identity documents
        - Social security number: ${users[0].ssn_last_four}
        - Driver's license number: ${ word("not answered") if users[0].license_number == "" else users[0].license_number }
        - Driver's license state: ${ word("not answered") if users[0].license_state == "" else users[0].license_state }
      % if tool_ID != "JOD_only":
        - Foreign citizenship? ${word("not answered") if users[0].has_foreign_citizenship == None else word(yesno(users[0].has_foreign_citizenship))}
      % if users[0].has_foreign_citizenship:
        - Foreign citizenship countries: ${ word("not answered") if users[0].countries_of_citizenship == "" else users[0].countries_of_citizenship }
        - Foreign identity documents: ${ word("not answered") if users[0].foreign_identity_documents == "" else users[0].foreign_identity_documents }
      % endif
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support or spousal_support_provisions == "user_agrees_to_pay_spousal_support"
  - Edit:
      - users[0].has_alias
    button: |
      ##### Your other names/aliases
        - ${ word("None") if not users[0].has_previous_name else users[0].aliases }
    show if: there_are_marital_children or user_wants_post_divorce_support
  - Edit:
      - users[0].eye_color
      - users[0].height_feet
    button: |
      ##### Your physical description
        - Eye color: ${ word("not answered") if users[0].eye_color == "" else users[0].eye_color }
        - Hair color: ${ word("not answered") if users[0].hair_color == "" else users[0].hair_color }
        - Weight (pounds): ${ word("not answered") if users[0].weight == 0 else users[0].weight }
        - Height: ${ word("not answered") if users[0].height_feet == 0 else word(users[0].height_feet) + word("ft, ") + word(users[0].height_inches) + word("in") }
        - Identifying marks: ${ word("not answered") if users[0].other_identifying_info == "" else users[0].other_identifying_info }
    show if: there_are_marital_children or user_wants_post_divorce_support
  - Edit:
      - users[0].race
    button: |
      ##### Your race
        - ${ word("not answered") if users[0].race == "" else users[0].race }
      % if users[0].race == "Other":
        - Other race description: ${ word("not answered") if users[0].other_race_description == "" else users[0].other_race_description }
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support
  - Edit:
      - other_parties[0].ssn
    button: |
      ##### ${other_parties[0]}'s identity documents
        - Social security number: ${other_parties[0].ssn_last_four}
        - Driver's license number: ${ word("not answered") if other_parties[0].license_number == "" else other_parties[0].license_number }
        - Driver's license state: ${ word("not answered") if other_parties[0].license_state == "" else other_parties[0].license_state }
      % if tool_ID != "JOD_only":
        - Foreign citizenship? ${word("not answered") if other_parties[0].has_foreign_citizenship == None else word(yesno(other_parties[0].has_foreign_citizenship))}
      % if other_parties[0].has_foreign_citizenship:
        - Foreign citizenship countries: ${ word("not answered") if other_parties[0].countries_of_citizenship == "" else other_parties[0].countries_of_citizenship }
        - Foreign identity documents: ${ word("not answered") if other_parties[0].foreign_identity_documents == "" else other_parties[0].foreign_identity_documents }
      % endif
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support or spousal_support_provisions == "user_agrees_to_pay_spousal_support"
  - Edit:
      - other_parties[0].has_alias
    button: |
      ##### ${other_parties[0]}'s other names/aliases
        - ${ word("None") if not other_parties[0].has_previous_name else other_parties[0].aliases }
    show if: there_are_marital_children or user_wants_post_divorce_support
  - Edit:
      - other_parties[0].eye_color
      - other_parties[0].height_feet
    button: |
      ##### ${other_parties[0]}'s physical description
        - Eye color: ${ word("not answered") if other_parties[0].eye_color == "" else other_parties[0].eye_color }
        - Hair color: ${ word("not answered") if other_parties[0].hair_color == "" else other_parties[0].hair_color }
        - Weight (pounds): ${ word("not answered") if other_parties[0].weight == 0 else other_parties[0].weight }
        - Height: ${ word("not answered") if other_parties[0].height_feet == 0 else word(other_parties[0].height_feet) + word("ft, ") + word(other_parties[0].height_inches) + word("in") }
        - Identifying marks: ${ word("not answered") if other_parties[0].other_identifying_info == "" else other_parties[0].other_identifying_info }
    show if: there_are_marital_children or user_wants_post_divorce_support
  - Edit:
      - other_parties[0].race
    button: |
      ##### ${other_parties[0]}'s race
        - ${ word("not answered") if other_parties[0].race == "" else other_parties[0].race }
      % if other_parties[0].race == "Other":
        - Other race description: ${ word("not answered") if other_parties[0].other_race_description == "" else other_parties[0].other_race_description }
      % endif
    show if: there_are_marital_children or user_wants_post_divorce_support
#
# ---------- personal property ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Personal Property</h2>""") }
#    show if: marriage.attribute_defined("personal_property_acquired")
  - Edit:
      - marriage.have_pension_retirement
      - follow up:
        - marriage.pension_retirement_accounts_keep_own
        - pension_retirement_accounts_keep
        - marriage.pension_retirement_accounts_continue
    button: |
      ##### Do you or your spouse have a pension or retirement account?
        - ${word(yesno(marriage.have_pension_retirement))}
      % if marriage.have_pension_retirement:
      ##### Do you each plan to keep your own accounts?
        - ${word(yesno(marriage.pension_retirement_accounts_keep_own))}
      % endif
  - Edit:
      - marriage.have_financial_instruments
      - follow up:
        - marriage.financial_instruments_held_together
        - marriage.financial_instruments_held_together_agree_about_division
        - marriage.financial_instruments_held_together_continue
        - marriage.financial_instruments_keep_or_divide
        - marriage.financial_instruments_keep_own_continue
    button: |
      ##### Any stocks, bonds, Certificates of Deposit (CDs), mutual funds, Money Market Accounts, or other investments?
        - ${word(yesno(marriage.have_financial_instruments))}
      % if marriage.have_financial_instruments:
      ##### Are any of these investments held in both of your names?
        - ${word(yesno(marriage.financial_instruments_held_together))}
      % if marriage.financial_instruments_held_together:
      ##### Do you and your spouse agree on how these investments will be divided?
        - ${word(yesno(marriage.financial_instruments_held_together_agree_about_division))}
      % elif not marriage.financial_instruments_held_together:
      ##### Do you each plan to keep your own accounts or do you want to ask the judge to divide your accounts?
        - ${word(yesno(marriage.financial_instruments_keep_or_divide))}
      % endif
      % endif
  - Edit:
      - invalidate:
        - marriage.personal_property_division_agreement
        - marriage.personal_property_division_actual
        - send_plaintiff_personal_property_to_addendum
        - send_defendant_personal_property_to_addendum
      - marriage.personal_property_info
      - marriage.personal_property_acquired
      - follow up:
        - marriage.accounts.revisit
        - marriage.other_pp.revisit
        - marriage.mobile_home.revisit
    button: |
      ##### Did you and your spouse acquire personal property during the marriage?
        - ${word(yesno(marriage.personal_property_acquired))}

      % if marriage.personal_property_acquired:
      ##### Have you and your spouse reached an agreement about how all personal property will be divided?
        - ${word(yesno(marriage.personal_property_division_agreement))}

      % if marriage.personal_property_division_agreement:
      ##### Have you and your spouse **actually divided** all the personal property based on your agreement?
        - ${word(yesno(marriage.personal_property_division_actual))}
      % endif
      % endif
    show if:
      - marriage.accounts.revisit
      - marriage.other_pp.revisit
      - marriage.mobile_home.revisit
  - Edit:
      - marriage.accounts.revisit
      - invalidate:
        - send_plaintiff_personal_property_to_addendum
        - send_defendant_personal_property_to_addendum
    button: |
      ##### ${marriage.accounts.question_text}

      % if marriage.accounts:
      % for idx, item in enumerate(marriage.accounts):
        - **${ordinal(idx, capitalize=True)} account**
          - **Type:** ${item.kind}
          - **Location:** ${item.source}
          - **Amount:** ${currency(item.balance)}
          - **Award:** ${item.owner}
      % endfor
      % else:
        - None
      % endif
    show if: marriage.personal_property_need_items
  - Edit:
      - marriage.other_pp.revisit
      - invalidate:
        - send_plaintiff_personal_property_to_addendum
        - send_defendant_personal_property_to_addendum
    button: |
      ##### ${marriage.other_pp.question_text}

      % if marriage.other_pp:
      % for idx, item in enumerate(marriage.other_pp):
        - **${ordinal(idx, capitalize=True)} item**
          - **Type** ${item.kind}
          - **Description:** ${item.desc}
          - **Award:** ${item.owner}
      % endfor
      % else:
        - None
      % endif
    show if: marriage.personal_property_need_items
  - Edit:
      - marriage.mobile_home.revisit
      - invalidate:
        - send_plaintiff_personal_property_to_addendum
        - send_defendant_personal_property_to_addendum
    button: |
      ##### ${marriage.mobile_home.question_text}

      % if marriage.mobile_home:
      % for idx, item in enumerate(marriage.mobile_home):
        - **${ordinal(idx, capitalize=True)} mobile home**
          - **VIN:** ${item.kind}
          - **Location:** ${item.desc}
          - **Award:** ${item.owner}
      % endfor
      % else:
        - None
      % endif
    show if: marriage.personal_property_need_items
#
# ---------- vehicles ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Vehicles</h2>""") }
#    show if: marriage.vehicles.attribute_defined("any")
  - Edit:
      - invalidate:
        - marriage.vehicles.keep_own
      - marriage.vehicles.info
      - marriage.vehicles.any
      - follow up:
        - marriage.vehicles.revisit
    button: |
      ##### Do you and your spouse own any vehicles (car, boat, trailer, motorcycle, snowmobile, etc.)?
        - ${word(yesno(marriage.vehicles.any))}

      % if marriage.vehicles.attribute_defined("keep_own"):
      ##### How do you want to divide your vehicles?
      % if marriage.vehicles.keep_own:
        - Each party will keep the vehicle(s) now in his or her possession and titled in <u>only</u> his or her name. The party keeping the vehicle(s) is fully responsible to pay any debt related to the vehicle(s). The other party will have no claim to any vehicle(s) in the other's name and possession.
      % else:
        - We need to transfer title to one or more vehicles.
      % endif
      % endif
  - Edit:
      - marriage.vehicles.revisit
    button: |
      ##### ${marriage.vehicles.question_text}

      % if marriage.vehicles:
      % for idx, item in enumerate(marriage.vehicles):
        - **${ordinal(idx, capitalize=True)} vehicle**
          - **Year:** ${item.year}
          - **Make:** ${item.make}
          - **Model:** ${item.model}
          - **VIN:** ${item.vin}
          - **Award this vehicle to:** ${item.owner}
          - **Do you and the ${op_ask_role.capitalize()} agree on what should happen with this vehicle?** ${word(yesno(item.agree))}
          - **Is there a debt related to this vehicle?:** ${word(yesno(item.debt))}
      % endfor
      % else:
        - None
      % endif
    show if: marriage.vehicles.need_items
#
# ---------- debts ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Debts</h2>""") }
#    show if: marriage.debts.attribute_defined("any")
  - Edit:
      - invalidate:
        - marriage.debts.any
        - marriage.debts.pay_debts_in_own_names
        - marriage.debts.agree_responsibility_debts_own_name
        - marriage.debts.any_in_both_names
        - marriage.debts.agree_responsibility_debts_both_names
        - send_plaintiff_debts_to_addendum
        - send_defendant_debts_to_addendum
      - marriage.debts.info
      - recompute:
        - marriage.debts.need_items
      - follow up:
        - marriage.debts.revisit
    button: |
      ##### Do you or your spouse have any debts, either in your own names or together?
        - ${word(yesno(marriage.debts.any))}

      % if marriage.debts.any:
      ##### Do you and your spouse each plan to pay the debts **in your own names?**
        - ${word(yesno(marriage.debts.pay_debts_in_own_names))}

      % if not marriage.debts.pay_debts_in_own_names:
      ##### Do you and your spouse agree on who will be responsible for these debts?
        - ${word(yesno(marriage.debts.agree_responsibility_debts_own_name))}
      % endif

      ##### Do you and your spouse have any debts that are in **both** of your names?
        - ${word(yesno(marriage.debts.any_in_both_names))}

      % if marriage.debts.any_in_both_names:
      ##### Do you and your spouse agree on who will be responsible for these debts?
        - ${word(yesno(marriage.debts.agree_responsibility_debts_both_names))}
      % endif
      % endif
  - Edit:
      - marriage.debts.revisit
      - invalidate:
        - send_plaintiff_debts_to_addendum
        - send_defendant_debts_to_addendum
    button: |
      ##### ${marriage.debts.question_text}

      % if marriage.debts:
      % for idx, item in enumerate(marriage.debts):
        - **${ordinal(idx, capitalize=True)} debt**
          - **Type:** ${item.kind}
          - **Owed:** ${item.source}
          - **Balance:** ${currency(item.balance)}
          - **Responsible:** ${item.owner}
      % endfor
      % else:
        - None
      % endif
    show if: marriage.debts.need_items
#
# ---------- real property ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Real Property</h2>""") }
#    show if: marriage.real_property.attribute_defined("revisit")
  - Edit:
      - marriage.real_property.revisit
    button: |
      ##### ${marriage.real_property.question_text}

      % if marriage.real_property:
      % for idx, item in enumerate(marriage.real_property):
        - **${ordinal(idx, capitalize=True)} property**
          - **Address:** ${item.address.on_one_line()}
          - **Legal description:** ${item.desc}
          - **Parcel number:** ${item.parcel_number}
          - **Do you and ${other_parties[0]} agree on what should happen with this property?** ${word(yesno(item.agree))}
          - **Award this property to:** ${item.owner if item.owner in [users[0], other_parties[0]] else word("Sell and split value and debt")}
          % if item.attribute_defined("titled_together"):
          - **Is this property titled in both of your names?** ${word(yesno(item.titled_together))}
          % endif
          % if item.attribute_defined("title_award_to_named"):
          - **Is the person getting the property the one whose name is on the title?** ${word(yesno(item.title_award_to_named))}
          % endif
          % if item.attribute_defined("mortgage_or_loan"):
          - **Is there a mortgage or other loan on this property?** ${word(yesno(item.mortgage_or_loan))}
          % endif
          % if item.attribute_defined("mortgage_or_loan_together"):
          - **Is the mortgage or other loan in both of your names?** ${word(yesno(item.mortgage_or_loan_together))}
          % endif
          % if item.attribute_defined("mortgage_or_loan_award_to_named"):
          - **Is the person getting the property the one whose name is on the loan?** ${word(yesno(item.mortgage_or_loan_award_to_named))}
          % endif
      % endfor
      % else:
        - None
      % endif
#
# ---------- judgment information ----------
#
#  - raw html: |
#      ${ next_accordion("""<h2 class="h5">Judgment Information</h2>""") }
#    show if: marriage.attribute_defined("other_provisions_any")
  - Edit:
      - venue
      - invalidate:
        - court_index
        - the_court
        - the_foc
    button: |
      ##### Where you will file      
      You will file this case in **${county_choice} County.**
      % if county_choice == users[0].address.county and not users[0].ten_days_in_county:
      
      You **must wait** to file in **${ users[0].address.county } County** until you have lived there for the last ten days or more.
      % elif county_choice == other_parties[0].address.county and not other_parties[0].ten_days_in_county:
      
      You **must wait** to file in ${ other_parties[0].address.county } County until your spouse has lived there for the last ten days or more.
      % endif
    show if: tool_ID == "divorce_complaint" and len(all_potential_venue_options) == 2 and not (there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case)
    # conditions under which there is a basic choice of venue, matching id: "venue (normal choice)"
  - Edit:
      - venue
      - invalidate:
        - court_index
        - the_court
        - the_foc
    button: |
      ##### Where you will file      
      You will file this case in **${county_choice} County.**
      
      % if county_choice == users[0].address.county and users[0].ten_days_in_county == False:
      You **must wait** until you have lived in ${ users[0].address.county } County for ten days or more before you file for divorce.
      % elif county_choice == other_parties[0].address.county and other_parties[0].ten_days_in_county == False:
      You **must wait** until your spouse has lived in ${ other_parties[0].address.county } County for ten days or more before you file for divorce.
      % elif county_choice == users[0].address.county and other_parties[0].ten_days_in_county == False:
      You have chosen to file in **${ users[0].address.county }** County **before** your spouse has lived in their current county for 10 days or more. 
      
      *If you miss that deadline, you must update this tool and get new forms to file instead in ${ other_parties[0].address.county } County. This is because of your past separate maintenance case in that county.*
      % elif county_choice == other_parties[0].address.county and users[0].ten_days_in_county == False:
      You have chosen to file in **${ other_parties[0].address.county }** County **before you have lived in your current county for 10 days or more. 
      
      *If you miss that deadline, you must update this tool and get new forms to file instead in ${ users[0].address.county } County. This is because of your past separate maintenance case in that county.*
      % endif    
    show if: tool_ID == "divorce_complaint" and len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case and len(current_venue_options) == 1 and prior_family_cases[separate_maintenance_case_index].county not in current_venue_options
    # conditions under which there is a choice of venue but with special prior separate maintenance case logic, matching id: "venue: (weird separate maintenance choice)" 
  - note: |
      ##### Where you will file
      % if len(all_potential_venue_options) == 0:  #TODO delete after testing.
      If you're reading this, no venue has been selected. This means there's an **error** in the code. Please report an issue with as much detail as you can about the parties' Michigan-status, counties, time in Michigan, etc. Please close out this test and start a new one.
      % elif len(all_potential_venue_options) == 1:
      You only meet the requirements to file your divorce in **${ county_choice } County.** Your divorce forms will be prepared using ${ county_choice } as the filing county.  
      % elif len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case:
      Because of your earlier separate maintenance case, you must file in **${ prior_family_cases[separate_maintenance_case_index].county } County.** Your divorce forms will be prepared using ${ county_choice } as the filing county.  
      % endif
      % if len(current_venue_options) == 0:
      
      You **must wait** to file until you or your spouse have lived in ${ county_choice } County for the last ten days or more.
      % endif
    show if: tool_ID == "divorce_complaint" and len(all_potential_venue_options) == 1 or (len(all_potential_venue_options) == 2 and there_are_marital_children and prior_family_cases.there_are_any and there_is_venue_controlling_separate_maintenance_case and (len(current_venue_options) in [2, 0] or (len(current_venue_options) == 1 and prior_family_cases[separate_maintenance_case_index].county in current_venue_options)))
    # conditions under which there is only one option for venue, matching id: "venue (single option)"
  - Edit:
      - marriage.other_provisions_any
    button: |
      ##### Other provisions
        - ${marriage.attr("other_provisions")}
  - Edit:
      - marriage.temporary_order
    button: |
      ##### Was a **temporary order** entered in your case for custody, parenting time, child support, or spousal support?
        - ${word(yesno(marriage.temporary_order))}
      % if marriage.temporary_order:
      ##### Has any of the information that goes on the *Domestic Relations Judgment Information* form (FOC 100) changed since the last time it was filed?
        - ${word(yesno(marriage.temporary_order_changed))}
      % if marriage.temporary_order_changed:
      
      **Important!** Make sure all information on this page is correct and updated.
      % endif
      % endif
    show if: tool_ID == "JOD_only"
  - Edit:
      - MLH_esign
    button: |
      ##### Would you like to add your electronic signature to your form?
        - ${word(yesno(MLH_esign))}
#  - raw html: |
#      ${ end_accordion() }
#    show if: county_choice
---
table: children.edit_home_state
rows: children.filter(legal_parent="both")
columns:
  - Name: |
      row_item.familiar()
  - Lives in: |
      row_item.currently_resides_in_locality_display_name
  - Is that their legal "home state"?: |
      word(yesno(row_item.current_residence_is_home_state))
edit:
  - currently_resides_in_type
  - current_residence_is_home_state
delete buttons: False
---
id: review children home state screen
question: |
  Edit home state information for marital children
subquestion: |
  ${ children.edit_home_state }
continue button field: home_state_review_screen
---
table: children.edit_user_kid_addresses
rows: children.filter(legal_parent='user')
columns:
  - Name: |
      row_item.familiar()
  - Address:: |
      "Lives with you" if row_item.stepchild_lives_with == "user" else "Lives elsewhere" if row_item.stepchild_lives_with == "other" and row_item.stepchild_address_confidential else row_item.address.on_one_line()
  - Address confidential?: |
      "Yes" if row_item.stepchild_lives_with == "user" and confidential_contact_info_yn or row_item.stepchild_lives_with == "other" and row_item.stepchild_address_confidential else "No"
edit:
  - stepchild_lives_with
delete buttons: False
---
table: children.edit_OP_kid_addresses
rows: children.filter(legal_parent='other_party')
columns:
  - Name: |
      row_item.familiar()
  - Address:: |
      "Lives with your spouse" if row_item.stepchild_lives_with == "other_party" else "Lives elsewhere" if row_item.stepchild_lives_with == "other" and row_item.stepchild_address_confidential else row_item.address.on_one_line()
  - Address confidential?: |
      "N/A" if row_item.stepchild_lives_with == "other_party" else "Yes" if row_item.stepchild_lives_with == "other" and row_item.stepchild_address_confidential else "No"
edit:
  - stepchild_lives_with
delete buttons: False
---
id: review stepchildren address screen
question: |
  Edit address information for stepchildren
subquestion: |
  % if len(children.filter(legal_parent='user')) > 0:
  <h2 class="h4">Your legal children</h2>
  ${ children.edit_user_kid_addresses }
  % endif
  % if len(children.filter(legal_parent='other_party')) > 0:
  <h2 class="h4">Your spouse's legal children</h2>
  ${ children.edit_OP_kid_addresses }
  % endif
continue button field: stepchild_address_review_screen
---
table: children.edit_basic_info
rows: children
columns:
  - Name: |
      row_item
  - Birthdate: |
      format_date(row_item.birthdate, format='M/d/yyyy') if defined("row_item.birthdate") and row_item.birthdate != None else "---"
  - Gender: |
      row_item.gender if defined("row_item.gender") and row_item.gender != "" else "---"
  - SSN: |
      row_item.ssn_last_four if defined("row_item.ssn") else "not required"
edit:
  - basic_info
  - more_info
delete buttons: False
---
id: review children demographics
question: |
  Edit children's names and basic info
subquestion: |
  Use the table below to edit a child's:

  * name
  * birthdate
  * gender, or
  * social security number (SSN)
  % if tool_ID == "JOD_only":
  
  **Note:** A child's birthdate, gender, and SSN (optional) will only be asked for if **both spouses** are legal parents. 
  % else:
  
  **Note:** A child's SSN (optional) will only be asked for if **both spouses** are legal parents. Gender and birthdate are optional for stepchildren.
  % endif
  
  ${ children.edit_basic_info }
continue button field: child_demographics_review_screen
---
table: children.edit_legal_parents
rows: children
columns:
  - Child: |
      f"{row_item.name} ({format_date(row_item.birthdate, format='M/d/yyyy')})" if defined("row_item.birthdate") and row_item.birthdate != None else row_item.name
  - Legal parent: |
      "Both spouses" if row_item.legal_parent == "both" else users[0] if row_item.legal_parent == "user" else other_parties[0] if row_item.legal_parent == "other_party" else ""
edit:
  - rerun_parentage_logic
delete buttons: False
---
id: review children legal parents
question: |
  Edit children's legal parent info
subquestion: |
  Use the table below to edit legal parent information about a minor child.

  ${ children.edit_legal_parents }
continue button field: child_legal_parent_review_screen
---
only sets: enable_home_state_review_screen
code: |
  home_state_review_screen = True
  
  enable_home_state_review_screen = True
---
only sets: enable_stepchild_address_review_screen
code: |
  stepchild_address_review_screen = True
  
  enable_stepchild_address_review_screen = True
---
only sets: enable_child_demographics_review_screen
code: |
  child_demographics_review_screen = True
  
  enable_child_demographics_review_screen = True
---
only sets: enable_child_legal_parent_review_screen
code: |
  child_legal_parent_review_screen = True

  enable_child_legal_parent_review_screen = True
---